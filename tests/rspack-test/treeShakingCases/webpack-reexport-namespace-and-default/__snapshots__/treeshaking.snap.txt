```js title=main.js
"use strict";
(self["webpackChunkwebpack"] = self["webpackChunkwebpack"] || []).push([["main"], {
"./index.js"(__unused_rspack_module, __unused_rspack___webpack_exports__, __webpack_require__) {
/* import */ var _package1_script__rspack_import_0 = __webpack_require__("./package1/script.js");
/* import */ var _package1_script2__rspack_import_1 = __webpack_require__("./package1/script2.js");
/* import */ var _package2_script__rspack_import_2 = __webpack_require__("./package2/script.js");




it("should load module correctly", () => {
	__webpack_require__("./module.js");
});

// if (process.env.NODE_ENV === "production") {
it("default export should be unused", () => {
	expect(_package1_script__rspack_import_0.exportDefaultUsed).toBe(false);
	expect(_package1_script2__rspack_import_1.exportDefaultUsed).toBe(false);
});
// }

it("default export should be used", () => {
	expect(_package2_script__rspack_import_2.exportDefaultUsed).toBe(true);
});


},
"./module.js"(__unused_rspack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  mod: () => (mod)
});
/* import */ var _package1_script__rspack_import_0 = __webpack_require__("./package1/script.js");
/* import */ var _package2_script__rspack_import_1 = __webpack_require__("./package2/script.js");



const mod = _package2_script__rspack_import_1["default"];


},
"./package1/script.js"(__unused_rspack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.d(__webpack_exports__, {
  exportDefaultUsed: () => (exportDefaultUsed)
});
/* import */ var _script1__rspack_import_0 = __webpack_require__("./package1/script1.js");

/* unused export default */ var __rspack_default_export = ((/* unused pure expression or super */ null && (mod)));


const exportDefaultUsed = false;


},
"./package1/script1.js"(__unused_rspack_module, __unused_rspack___webpack_exports__, __webpack_require__) {
/* import */ var _script2__rspack_import_0 = __webpack_require__("./package1/script2.js");

/* unused export default */ var __rspack_default_export = (1);


},
"./package1/script2.js"(__unused_rspack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.d(__webpack_exports__, {
  exportDefaultUsed: () => (exportDefaultUsed)
});

/* export default */ function __rspack_default_export() {
	return mod;
}


const exportDefaultUsed = false;


},
"./package2/script.js"(__unused_rspack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__rspack_default_export),
  exportDefaultUsed: () => (exportDefaultUsed)
});
/* import */ var _script1__rspack_import_0 = __webpack_require__("./package2/script1.js");

/* export default */ const __rspack_default_export = (_script1__rspack_import_0["default"]);


const exportDefaultUsed = true;


},
"./package2/script1.js"(__unused_rspack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__rspack_default_export)
});
/* export default */ const __rspack_default_export = (1);


},

},function(__webpack_require__) {
var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId) }
var __webpack_exports__ = (__webpack_exec__("./index.js"));

}
]);
```