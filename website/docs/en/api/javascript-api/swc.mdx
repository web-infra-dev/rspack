# SWC API

Rspack supports JavaScript minify and transform.

Rspack uses SWC under the hood to transform and minify JavaScript code, you can access these functions using the `rspack.experiments.swc` API.

## Examples

Here is a simple example demonstrating how to transform JavaScript code using Rspack:

```js
import { rspack } from '@rspack/core';

const { swc } = rspack.experiments;

swc
  .transform('const a:number = 10;', {
    filename: 'main.ts',
    jsc: {
      parser: {
        syntax: 'typescript',
      },
      target: 'es5',
    },
  })
  .then(result => {
    console.log(result.code);
  });
```

In addition to using the `swc` API directly, you can also use it in loaders or plugins to help with code transform or minify.

```js
import { rspack } from '@rspack/core';

const { swc } = rspack.experiments;

export default async function (content) {
  const customCode = `
    const a = 10;
    const b = 20;
    // custom code
  `;

  const minifiedCode = await swc.minify(customCode, {
    compress: true,
    keep_classnames: true,
    safari10: true,
    sourceMap: true,
  });

  return `${minifiedCode}\n${content}`;
}
```

## Options

The API options accepted by the above APIs are passed to SWC.

You can learn more about configuration options in the SWC official documentation:

- [SWC Transform API](https://swc.rs/docs/usage/core#transform) - Code transform options
- [SWC Minify API](https://swc.rs/docs/usage/core#minify) - Code minify options

```ts
declare namespace rspack {
  namespace experimental {
    declare const swc: {
      transform(
        code: string,
        options?: TransformOptions,
      ): Promise<TransformOutput>;
      minify(code: string, options?: JsMinifyOptions): Promise<TransformOutput>;
    };

    declare interface JsMinifyOptions {
      compress?: TerserCompressOptions | boolean;
      format?: JsFormatOptions & ToSnakeCaseProperties<JsFormatOptions>;
      mangle?: TerserMangleOptions | boolean;
      ecma?: TerserEcmaVersion;
      keep_classnames?: boolean;
      keep_fnames?: boolean;
      module?: boolean | 'unknown';
      safari10?: boolean;
      toplevel?: boolean;
      sourceMap?: boolean;
      outputPath?: string;
      inlineSourcesContent?: boolean;
    }

    declare interface TransformOptions {
      filename?: string;
      sourceMaps?: boolean;
      jsc?: {
        parser?: {
          syntax?: 'ecmascript' | 'typescript';
          decorators?: boolean;
          dynamicImport?: boolean;
          exportDefaultFrom?: boolean;
          exportNamespaceFrom?: boolean;
          importAssertions?: boolean;
          tsx?: boolean;
        };
        target?: string;
        loose?: boolean;
        externalHelpers?: boolean;
        keepClassNames?: boolean;
        keepFnName?: boolean;
        minifySyntax?: boolean;
        minifyWhitespace?: boolean;
        minifyIdentifiers?: boolean;
      };
      // ...
    }

    declare interface TransformOutput {
      code: string;
      map?: string;
    }
  }
}
```
