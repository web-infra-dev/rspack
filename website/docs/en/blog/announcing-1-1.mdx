---
date: 2024-11-6 16:00:00
sidebar: false
---

# Announcing Rspack 1.1

> November 6, 2024

{/* replace the banner */}

![Rspack 1.1](https://assets.rspack.dev/rspack/rspack-banner-v1-0.png)

---

Rspack v1.1 has been released!

Notable changes in Rspack v1.1:

- [Performance Improvement](#performance-improvement):
  - [Using Async Thread Pool](#use-async-thread-pool): Significantly improved the performance of make phase of cold starts through more reasonable thread scheduling.
  - [Experimental New Incremental Rebuild](#experimental-new-incremental-rebuild): A new experimental incremental rebuild feature to significantly improved the performance of rebuild.
    - [Incremental Build Chunk Graph](#experimental-incremental-build-chunk-graph): Significantly improved the performance of chunk graph generation of incremental rebuilds through new algorithm.
  - [Bundled Rspack](#bundled-rspack): Bundle `@rspack/core` for faster startup.
- [Exciting New Features](#exciting-new-features):
  - [Improvement of Built-in HTML Plugin](#improvement-of-built-in-html-plugin): Refactored the built-in HTML plugin and support multiple important features.
  - [Improvement of Types](#improvement-of-types): Added JSDoc for all configuration options.
- [Ecosystem Cooperation](#ecosystem-cooperation):
  - TODO @chenjiahan

## Performance Improvement

### Use Async Thread Pool

TODO: @hardfist

{/* What's change */}

{/* Data Comparison */}

### Experimental New Incremental Rebuild

In the early versions of Rspack 0.x, we implemented [experiments.incrementalRebuild](https://v0.rspack.dev/config/experiments#experimentsincrementalrebuild). As this feature gradually stabilized, we removed the experiments configuration and enabled it by default. However, this feature only enabled incrementality for the `make` and `emitAssets` stages of the rebuild. For many projects, the loader in the `make` stage takes a lot of time. At that time, this feature had a relatively obvious performance improvement in rebuild for these projects. But there are still some projects that take a lot of time in stages other than `make`. Therefore, we optimized and expanded this feature and gradually introduced this feature into other stages, such as `buildChunkGraph`, `providedExports`, `moduleCodegen`, etc. In Rspack v1.1, we introduced [experiments.incremental](https://rspack.dev/config/experiments#experimentsincremental) as the successor and superset of `experiments.incrementalRebuild`, aiming to bring further rebuild performance improvement and faster HMR to developers.

In a case of 10000 React components, the HMR becomes 38% faster:

![10000 React Components with new incremental enabled](https://assets.rspack.dev/rspack/assets/rspack-v1.1-new-incremental-compare.png)

In Rspack v1.1 you can enable this feature in development mode by:

```js title=rspack.config.js
const isDev = process.env.NODE_ENV;
module.exports = {
  mode: isDev ? 'development' : 'production',
  experiments: {
    incremental: isDev,
  },
};
```

See [`experiments.incremental`](https://rspack.dev/config/experiments#experimentsincremental) for more details.

This is still an experimental feature and we need more work to stabilize it, but we hope you can try it out and provide us with some bugs and feedback at https://github.com/web-infra-dev/rspack/issues/8106.

#### Incremental Build Chunk Graph

TODO: @jserfeng

{/* What's change */}

{/* Data Comparison */}

{/* How to Use */}

### Bundled Rspack

TODO: @chenjiahan

{/* What's change */}

{/* Data Comparison */}

{/* Maybe Breaking Change */}

## Exciting New Features

### Improvement of Built-in HTML Plugin

In earlier versions of Rspack, the built-in `HtmlRspackPlugin` was implemented. However, its capabilities were severely lacking. It lacked some configuration options and did not support `hooks`, which made those plugins implemented based on the `hooks` of `HtmlWebpackPlugin` incompatible with Rspack.

Therefore, we refactored `HtmlRspackPlugin`. While supporting most of the configuration options of `HtmlWebpackPlugin`, we also completed the alignment of `hooks`. Now you can get these hooks through `HtmlRspackPlugin.getCompilationHooks` and use them to modify the content of the HTML assets like below:

```js
const AddAttributePlugin = {
  apply: function (compiler) {
    compiler.hooks.compilation.tap('AddAttributePlugin', compilation => {
      HtmlRspackPlugin.getCompilationHooks(
        compilation,
      ).alterAssetTags.tapPromise('AddAttributePlugin', async data => {
        data.assetTags.scripts = data.assetTags.scripts.map(tag => {
          if (tag.tagName === 'script') {
            tag.attributes.specialAttribute = true;
          }
          return tag;
        });
      });
    });
  },
};

module.exports = {
  plugins: [new HtmlRspackPlugin(), AddAttributePlugin],
};
```

See [`HtmlRspackPlugin`](https://rspack.dev/plugins/rspack/html-rspack-plugin) for more details

### Improvement of Types

In the initial versions of Rspack, we used `zod` to validate user configurations, inferring all types from it. However, the absence of JSDoc made it challenging to comprehend the generated `zod` types when examining the `.d.ts` files or using intellisense in an editor.

With this update, we have refactored the configuration types and added JSDoc comments for all types to enhance clarity and understanding.

See intellisense in IDE:

![configuration intellisense in IDE](https://assets.rspack.dev/rspack/assets/rspack-v1.1-config-intellisense.png)

## Ecosystem Cooperation

### Docusaurus

TODO: @chenjiahan

### Rsbuild v1.1

Rsbuild 1.1 has been released along with Rspack 1.1!

Notable changes:

- Support for CLI shortcuts
- New `server.base` configuration
- New assets-related configurations

#### Support for CLI shortcuts

Rsbuild supports enabling CLI shortcuts through the `dev.cliShortcuts` configuration and is enabled by default when using the Rsbuild CLI.

Rsbuild CLI shortcut keys provide shortcut functions such as clear console, open in browser, restart server, etc. You can press `h + Enter` to display all shortcut keys.

![](https://assets.rspack.dev/rsbuild/assets/rsbuild-cli-shortcuts.jpeg)

#### New `server.base` configuration

By default, the base path of the server is `/`, and users can access output files such as `index.html` and public folder assets through http://localhost:3000/.

Rsbuild supports modifying the base path of the server through [server.base](https://rsbuild.dev/config/server/base). If you to access these files through `http://localhost:3000/foo/`, you can configure the following:

```ts title="rsbuild.config.ts"
export default {
  server: {
    base: '/foo',
  },
};
```

#### New assets-related configurations

By default, Rsbuild treats common image, font, audio, and video files as static assets. Through the source.assetsInclude config, you can specify additional file types that should be treated as static assets. These added static assets are processed using the same rules as the built-in supported static assets.

Rsbuild 1.1 adds the following static assets-related configurations:

- [source.assetsInclude](https://rsbuild.dev/config/source/assets-include): Used to set the additional files that should be treated as static assets.
- [output.filename.assets](https://rsbuild.dev/config/output/filename): Used to set the name of other static assets.
- [output.distPath.assets](https://rsbuild.dev/config/output/dist-path): Used to set the output directory of other static assets.

## Migration Guide

### Upgrade the SWC plugins

In version v1.1, the Rust crate `swc_core` has been upgraded to `4.0.2`. Users of the SWC Wasm plugin need to ensure version consistency with `swc_core` being used, otherwise, it may lead to unforeseen issues.

For more details, please see this [document](https://swc.rs/docs/plugin/selecting-swc-core) of SWCã€‚
