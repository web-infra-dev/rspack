import { PackageManagerTabs } from '@theme';

# CSS

Rspack å†…ç½®äº†å¯¹ CSS çš„æ”¯æŒï¼Œå¹¶æä¾›äº†å¤šç§èƒ½åŠ›æ¥æ”¯æŒ CSS æ‰“åŒ…ã€‚

## å¼€å¯ CSS æ”¯æŒ

ä½ å¯ä»¥ä»ä»¥ä¸‹æ–¹å¼ä¸­è¿›è¡Œé€‰æ‹©ï¼š

### å†…ç½® CSS æ”¯æŒ

Rspack æä¾›äº† [experiment.css](/config/experiments#experimentscss) é€‰é¡¹ï¼Œè¿™æ˜¯ä» webpack 5 å¼€å§‹å¼•å…¥çš„å®éªŒæ€§åŠŸèƒ½ï¼Œç”¨äºå¼€å¯å¯¹ CSS çš„æ”¯æŒã€‚Rspack è¿›ä¸€æ­¥å®Œå–„äº†è¯¥åŠŸèƒ½ï¼Œå¹¶è®¡åˆ’åœ¨ Rspack 2.0 é»˜è®¤å¼€å¯å®ƒã€‚

> å¦‚æœä½ åŸºäº Rspack åˆ›å»ºäº†ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œé‚£ä¹ˆæ¨èä½¿ç”¨è¯¥æ–¹å¼ã€‚

```js title="rspack.config.mjs"
export default {
  experiments: {
    css: true,
  },
};
```

å¼€å¯ `experiment.css` åï¼ŒRspack å°†æ”¯æŒä»¥ä¸‹ä¸‰ç§æ¨¡å—ç±»å‹ï¼Œä½ å¯ä»¥åœ¨ `rule` ä¸Šé€šè¿‡ `type` æ¥è®¾ç½®å®ƒä»¬ï¼š

- `css`ï¼šç”¨äºå¤„ç†æ™®é€šçš„ CSS æ–‡ä»¶ã€‚
- `css/module`ï¼šç”¨äºå¤„ç† [CSS Modules](#css-modules)ã€‚
- `css/auto`ï¼šåŸºäºæ–‡ä»¶æ‰©å±•åè‡ªåŠ¨åˆ¤æ–­æ˜¯æ™®é€š CSS æ–‡ä»¶è¿˜æ˜¯ CSS Modulesï¼Œ`*.module.css` ç»“å°¾çš„æ–‡ä»¶ä¼šè¢«è§†ä¸º CSS Modulesã€‚

å¯¹äº `*.css` ç»“å°¾çš„æ–‡ä»¶ï¼ŒRspack ä¼šé»˜è®¤å°†å…¶è§†ä¸º `type: 'css/auto'`ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡é…ç½® `type: 'css/auto'`ï¼Œè‡ªå®šä¹‰å°†å“ªäº›æ–‡ä»¶è§†ä¸º CSS æ–‡ä»¶ã€‚æ¯”å¦‚ï¼Œå°† `.less` æ–‡ä»¶è§†ä¸º CSS æ–‡ä»¶ï¼š

```js title="rspack.config.mjs"
export default {
  module: {
    rules: [
      {
        test: /\.less$/,
        type: 'css/auto', // ğŸ‘ˆ
        use: ['less-loader'],
      },
    ],
  },
};
```

### ä½¿ç”¨ CssExtractRspackPlugin

Rspack æ”¯æŒä½¿ç”¨ [css-loader](https://github.com/webpack/css-loader) å’Œ [CssExtractRspackPlugin](/plugins/rspack/css-extract-rspack-plugin)ï¼Œç”¨äºç”Ÿæˆç‹¬ç«‹çš„ CSS æ–‡ä»¶ã€‚

å¦‚æœä½ æ­£åœ¨è¿ç§»ä¸€ä¸ªä½¿ç”¨ [mini-css-extract-plugin](https://github.com/webpack/mini-css-extract-plugin) çš„ webpack é¡¹ç›®ï¼Œé‚£ä¹ˆæ¨èä½¿ç”¨ CssExtractRspackPlugin æ¥æ›¿æ¢ mini-css-extract-pluginï¼Œå®ƒä»¬çš„åŠŸèƒ½å’Œé…ç½®æ–¹å¼åŸºæœ¬ä¸€è‡´ã€‚

- å®‰è£… css-loaderï¼š

<PackageManagerTabs command="add css-loader -D" />

- æ·»åŠ é…ç½®ï¼š

```js title="rspack.config.mjs"
import { rspack } from '@rspack/core';

export default {
  module: {
    rules: [
      {
        test: /\.css$/i,
        use: [rspack.CssExtractRspackPlugin.loader, 'css-loader'],
        type: 'javascript/auto',
      },
    ],
  },
  plugins: [new rspack.CssExtractRspackPlugin({})],
};
```

> å‚è€ƒ [è¿ç§»æŒ‡å—](/guide/migration/webpack#mini-css-extract-plugin--rspackcssextractrspackplugin) äº†è§£å¦‚ä½•ä» webpack è¿›è¡Œè¿ç§»ã€‚

:::tip
CssExtractRspackPlugin ä¸èƒ½ä¸ `type: 'css'`ã€`type: 'css/auto'` æˆ– `type: 'css/module'` åŒæ—¶ä½¿ç”¨ï¼Œå› ä¸ºè¿™äº› type æ˜¯ç”± `experiments.css` æä¾›çš„ã€‚
:::

### ä½¿ç”¨ style-loader

Rspack æ”¯æŒä½¿ç”¨ [css-loader](https://github.com/webpack/css-loader) å’Œ [style-loader](https://github.com/webpack/style-loader)ï¼Œå°† CSS é€šè¿‡ `<style>` æ ‡ç­¾æ³¨å…¥ã€‚è¿™ç§æ–¹å¼ä¸ä¼šç”Ÿæˆç‹¬ç«‹çš„ CSS æ–‡ä»¶ï¼Œè€Œæ˜¯å°† CSS çš„å†…å®¹å†…è”åˆ° JS æ–‡ä»¶ä¸­ã€‚

- å®‰è£… css-loader å’Œ style-loaderï¼š

<PackageManagerTabs command="add css-loader style-loader -D" />

- æ·»åŠ é…ç½®ï¼š

```js title="rspack.config.mjs"
export default {
  module: {
    rules: [
      {
        test: /\.css$/i,
        use: ['style-loader', 'css-loader'],
        type: 'javascript/auto',
      },
    ],
  },
};
```

:::tip
style-loader ä¸èƒ½ä¸ `type: 'css'`ã€`type: 'css/auto'` æˆ– `type: 'css/module'` åŒæ—¶ä½¿ç”¨ï¼Œå› ä¸ºè¿™äº› type æ˜¯ç”± `experiments.css` æä¾›çš„ã€‚
:::

## CSS Modules

[CSS Modules](https://github.com/css-modules/css-modules) æ˜¯ä¸€ç§ CSS æ–‡ä»¶çš„ç»„ç»‡æ–¹å¼ï¼Œå®ƒé€šè¿‡ä¸ºç±»åè‡ªåŠ¨ç”Ÿæˆå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œæ¥å±€éƒ¨åŒ– CSS çš„ä½œç”¨åŸŸï¼Œè¿™å…è®¸ä½ åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ä½¿ç”¨ç›¸åŒçš„ç±»åï¼Œè€Œä¸ç”¨æ‹…å¿ƒå†²çªã€‚

### å†…ç½®æ”¯æŒ

åœ¨å¼€å¯ [å†…ç½® CSS æ”¯æŒ](#å†…ç½®-css-æ”¯æŒ) åï¼ŒRspack é»˜è®¤å°†æ‰©å±•åä¸º `*.module.css` çš„æ–‡ä»¶è§†ä¸º CSS Modulesï¼Œä½ å¯ä»¥åœ¨ JavaScript æ–‡ä»¶ä¸­å¯¼å…¥å®ƒï¼Œç„¶åå°† CSS æ–‡ä»¶ä¸­å®šä¹‰çš„æ¯ä¸ªç±»ä½œä¸ºæ¨¡å—çš„å¯¼å‡ºæ¥è®¿é—®ã€‚

```css title="index.module.css"
.red {
  color: red;
}
```

ä½ å¯ä»¥ä½¿ç”¨å‘½åç©ºé—´å¯¼å…¥ï¼š

```ts title="index.js"
import * as styles from './index.module.css';
document.getElementById('element').className = styles.red;
```

ä¹Ÿå¯ä»¥ä½¿ç”¨å…·åå¯¼å…¥ï¼š

```ts
import { red } from './index.module.css';
document.getElementById('element').className = red;
```

è¦åœ¨ Rspack ä¸­å¯ç”¨é»˜è®¤å¯¼å…¥æ–¹å¼ï¼Œä½ éœ€è¦åœ¨ Rspack é…ç½®ä¸­å°† `namedExports` é…ç½®ä¸º `false`ã€‚è¿™å…è®¸ä½ åœ¨ç”¨åˆ° CSS Modules æ—¶ï¼Œé™¤äº†å‘½åç©ºé—´å¯¼å…¥å’Œå…·åå¯¼å…¥ï¼Œä¹Ÿèƒ½é€šè¿‡é»˜è®¤å¯¼å…¥æ•´ä¸ªæ ·å¼æ¨¡å—ï¼š

```js title="rspack.config.mjs"
export default {
  module: {
    parser: {
      'css/auto': {
        namedExports: false,
      },
    },
  },
};
```

ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨é»˜è®¤å¯¼å…¥ï¼š

```js
import styles from './index.module.css';
document.getElementById('element').className = styles.red;
```

:::tip

Rspack æä¾›äº†é€‰é¡¹ï¼Œå…è®¸ä½ è‡ªå®šä¹‰ CSS Modules çš„è§£æå’Œç”Ÿæˆæ–¹å¼ï¼š

- [module.parser.css](/config/module#moduleparsercss)ï¼šé…ç½® CSS Modules çš„è§£ææ–¹å¼ã€‚
- [module.generator.css](/config/module#modulegeneratorcss)ï¼šé…ç½® CSS Modules çš„ç”Ÿæˆæ–¹å¼ã€‚

:::

### ä½¿ç”¨ css-loader

å¦‚æœä½ æ²¡æœ‰å¼€å¯ Rspack çš„å†…ç½® CSS æ”¯æŒï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ [css-loader](https://github.com/webpack/css-loader) æ¥æä¾›å¯¹ CSS Modules çš„æ”¯æŒã€‚

é€šè¿‡ `css-loader` çš„ `modules` é€‰é¡¹å¼€å¯ï¼š

```js title="rspack.config.mjs"
export default {
  module: {
    rules: [
      {
        test: /\.css$/i,
        loader: 'css-loader',
        type: 'javascript/auto',
        options: {
          modules: true,
        },
      },
    ],
  },
};
```

æ›´å¤šç”¨æ³•è¯·å‚è€ƒ [css-loader - modules](https://github.com/webpack/css-loader#modules)ã€‚

## PostCSS

Rspack æ”¯æŒä½¿ç”¨ [postcss-loader](https://github.com/webpack/postcss-loader)ï¼Œä½ å¯ä»¥è¿™æ ·é…ç½®ï¼š

<PackageManagerTabs command="add postcss postcss-loader -D" />

```js title="rspack.config.mjs"
export default {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          {
            loader: 'postcss-loader',
            options: {
              postcssOptions: {
                // ...
              },
            },
          },
        ],
        // å¦‚æœä½ éœ€è¦å°† '*.module.css' è§†ä¸º CSS Modules é‚£ä¹ˆå°† 'type' è®¾ç½®ä¸º 'css/auto' å¦åˆ™è®¾ç½®ä¸º 'css'
        type: 'css/auto',
      },
    ],
  },
};
```

ä¸Šè¿°é…ç½®ä¼šå°†æ‰€æœ‰ `*.css` æ–‡ä»¶ç»è¿‡ [postcss-loader](https://github.com/webpack/postcss-loader) å¤„ç†ï¼Œå¹¶å°†ç”Ÿæˆçš„ç»“æœäº¤ç»™ Rspack å®Œæˆ CSS åç»­æµç¨‹çš„å¤„ç†ã€‚

## Sass

Rspack æ”¯æŒä½¿ç”¨ [sass-loader](https://github.com/webpack/sass-loader)ï¼Œä½ å¯ä»¥è¿™æ ·é…ç½®ï¼š

<PackageManagerTabs command="add sass-embedded sass-loader -D" />

```js title="rspack.config.mjs"
export default {
  module: {
    rules: [
      {
        test: /\.(sass|scss)$/,
        use: [
          {
            loader: 'sass-loader',
            options: {
              // åŒæ—¶ä½¿ç”¨ `modern-compiler` å’Œ `sass-embedded` å¯ä»¥æ˜¾è‘—æå‡æ„å»ºæ€§èƒ½
              // éœ€è¦ `sass-loader >= 14.2.1`
              api: 'modern-compiler',
              implementation: require.resolve('sass-embedded'),
            },
          },
        ],
        // å¦‚æœä½ éœ€è¦å°† '*.module.(sass|scss)' è§†ä¸º CSS Modules é‚£ä¹ˆå°† 'type' è®¾ç½®ä¸º 'css/auto' å¦åˆ™è®¾ç½®ä¸º 'css'
        type: 'css/auto',
      },
    ],
  },
};
```

ä¸Šè¿°é…ç½®ä¼šå°†æ‰€æœ‰ `*.sass` å’Œ `*.scss` æ–‡ä»¶ç»è¿‡ [sass-loader](https://github.com/webpack/sass-loader) å¤„ç†ï¼Œå¹¶å°†ç”Ÿæˆçš„ç»“æœäº¤ç»™ Rspack å®Œæˆ CSS åç»­æµç¨‹çš„å¤„ç†ã€‚

## Less

Rspack æ”¯æŒä½¿ç”¨ [less-loader](https://github.com/webpack/less-loader)ï¼Œä½ å¯ä»¥è¿™æ ·é…ç½®ï¼š

<PackageManagerTabs command="add less less-loader -D" />

```js title="rspack.config.mjs"
export default {
  module: {
    rules: [
      {
        test: /\.less$/,
        use: [
          {
            loader: 'less-loader',
            options: {
              // ...
            },
          },
        ],
        // å¦‚æœä½ éœ€è¦å°† '*.module.less' è§†ä¸º CSS Modules é‚£ä¹ˆå°† 'type' è®¾ç½®ä¸º 'css/auto' å¦åˆ™è®¾ç½®ä¸º 'css'
        type: 'css/auto',
      },
    ],
  },
};
```

ä¸Šè¿°é…ç½®ä¼šå°†æ‰€æœ‰ `*.less` æ–‡ä»¶ç»è¿‡ [less-loader](https://github.com/webpack/less-loader) å¤„ç†ï¼Œå¹¶å°†ç”Ÿæˆçš„ç»“æœäº¤ç»™ Rspack å®Œæˆ CSS åç»­æµç¨‹çš„å¤„ç†ã€‚

## Tailwind CSS

[Tailwind CSS](https://tailwindcss.com/) æ˜¯ä¸€ä¸ªä»¥ Utility Class ä¸ºåŸºç¡€çš„ CSS æ¡†æ¶å’Œè®¾è®¡ç³»ç»Ÿï¼Œå¯ä»¥å¿«é€Ÿåœ°ä¸ºç»„ä»¶æ·»åŠ å¸¸ç”¨æ ·å¼ï¼ŒåŒæ—¶æ”¯æŒä¸»é¢˜æ ·å¼çš„çµæ´»æ‰©å±•ã€‚

Tailwind CSS å®˜ç½‘æä¾›äº†é›†æˆ Rspack çš„æŒ‡å—ï¼Œè¯·å‚è€ƒï¼š

- [Install Tailwind CSS v4 with Rspack](https://tailwindcss.com/docs/installation/framework-guides/rspack/react)
- [Install Tailwind CSS v3 with Rspack](https://v3.tailwindcss.com/docs/guides/rspack)
