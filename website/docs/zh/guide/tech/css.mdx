import { PackageManagerTabs } from '@theme';

# CSS

CSS æ˜¯ Rspack çš„ä¸€ç­‰å…¬æ°‘ï¼ŒRspack å†…ç½®äº†å¯¹ CSS çš„å¤„ç†èƒ½åŠ›ï¼Œåªéœ€è¦é…ç½® `experiments.css` ä¸º `true` å³å¯ã€‚

æˆ‘ä»¬é»˜è®¤ä¼šå°† `*.css` ç»“å°¾çš„æ–‡ä»¶è§†ä¸º `css/auto` æ¨¡å—ç±»å‹ï¼Œå°† `*.module.css` ç»“å°¾çš„æ–‡ä»¶è§†ä¸º [CSS Modules](https://github.com/css-modules/css-modules)ã€‚

ä½ ä¹Ÿå¯ä»¥é€šè¿‡é…ç½® `type: 'css/auto'` è‡ªå®šä¹‰å“ªäº›æ¨¡å—ä¸º `css` æ¨¡å—ã€‚

```js title=rspack.config.js
module.exports = {
  module: {
    rules: [
      {
        test: /\.less$/,
        type: 'css/auto', // ğŸ‘ˆ
        use: ['less-loader'],
      },
    ],
  },
};
```

å¦‚æœä½ æ‰“ç®—ä» webpack è¿›è¡Œè¿ç§»ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒ[è¿ç§»æŒ‡å—](/guide/migration/webpack#å»é™¤-css-loader-å’Œ-style-loader-å’Œ-mini-css-extract-plugin)ã€‚

## CSS Modules

Rspack é»˜è®¤å°†æ‰©å±•åä¸º `*.module.css` çš„æ–‡ä»¶è§†ä¸º [CSS Modules](https://github.com/css-modules/css-modules)ï¼Œä½ å¯ä»¥åœ¨ JavaScript æ–‡ä»¶ä¸­å¯¼å…¥å®ƒï¼Œç„¶åå°† CSS æ–‡ä»¶ä¸­å®šä¹‰çš„æ¯ä¸ªç±»ä½œä¸ºæ¨¡å—çš„å¯¼å‡ºæ¥è®¿é—®ã€‚

```css title="index.module.css"
.red {
  color: red;
}
```

ä½ å¯ä»¥ä½¿ç”¨å‘½åç©ºé—´å¯¼å…¥ï¼š

```ts title="index.js"
import * as styles from './index.module.css';
document.getElementById('element').className = styles.red;
```

ä¹Ÿå¯ä»¥ä½¿ç”¨å…·åå¯¼å…¥ï¼š

```ts
import { red } from './index.module.css';
document.getElementById('element').className = red;
```

è¦åœ¨ Rspack ä¸­å¯ç”¨é»˜è®¤å¯¼å…¥æ–¹å¼ï¼Œä½ éœ€è¦åœ¨ `rspack.config.js` æ–‡ä»¶ä¸­å°† `namedExports` é…ç½®ä¸º `false`ã€‚è¿™å…è®¸ä½ åœ¨ç”¨åˆ° CSS Modules æ—¶ï¼Œé™¤äº†å‘½åç©ºé—´å¯¼å…¥å’Œå…·åå¯¼å…¥ï¼Œä¹Ÿèƒ½é€šè¿‡é»˜è®¤å¯¼å…¥æ•´ä¸ªæ ·å¼æ¨¡å—ï¼š

```js title=rspack.config.js
module.exports = {
  module: {
    parser: {
      'css/auto': {
        namedExports: false,
      },
    },
  },
};
```

ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨é»˜è®¤å¯¼å…¥ï¼š

```js
import styles from './index.module.css';
document.getElementById('element').className = styles.red;
```

æ›´å¤šå…³äº CSS Modules çš„é…ç½®è¯·å‚è€ƒ [module.parser.css](/config/module#moduleparsercss)ã€‚

## PostCSS

Rspack æ”¯æŒä½¿ç”¨ [postcss-loader](https://github.com/webpack-contrib/postcss-loader)ï¼Œä½ å¯ä»¥è¿™æ ·é…ç½®ï¼š

<PackageManagerTabs command="add postcss postcss-loader -D" />

```ts title="rspack.config.js"
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          {
            loader: 'postcss-loader',
            options: {
              postcssOptions: {
                // ...
              },
            },
          },
        ],
        // å¦‚æœä½ éœ€è¦å°† '*.module.css' è§†ä¸º CSS Modules é‚£ä¹ˆå°† 'type' è®¾ç½®ä¸º 'css/auto' å¦åˆ™è®¾ç½®ä¸º 'css'
        type: 'css/auto',
      },
    ],
  },
};
```

ä¸Šè¿°é…ç½®ä¼šå°†æ‰€æœ‰ `*.css` æ–‡ä»¶ç»è¿‡ [postcss-loader](https://github.com/webpack-contrib/postcss-loader) å¤„ç†ï¼Œå¹¶å°†ç”Ÿæˆçš„ç»“æœäº¤ç»™ Rspack å®Œæˆ CSS åç»­æµç¨‹çš„å¤„ç†ã€‚

## Sass

Rspack æ”¯æŒä½¿ç”¨ [sass-loader](https://github.com/webpack-contrib/sass-loader)ï¼Œä½ å¯ä»¥è¿™æ ·é…ç½®ï¼š

<PackageManagerTabs command="add sass-embedded sass-loader -D" />

```ts title="rspack.config.js"
module.exports = {
  module: {
    rules: [
      {
        test: /\.(sass|scss)$/,
        use: [
          {
            loader: 'sass-loader',
            options: {
              // åŒæ—¶ä½¿ç”¨ `modern-compiler` å’Œ `sass-embedded` å¯ä»¥æ˜¾è‘—æå‡æ„å»ºæ€§èƒ½
              // éœ€è¦ `sass-loader >= 14.2.1`
              api: 'modern-compiler',
              implementation: require.resolve('sass-embedded'),
            },
          },
        ],
        // å¦‚æœä½ éœ€è¦å°† '*.module.(sass|scss)' è§†ä¸º CSS Modules é‚£ä¹ˆå°† 'type' è®¾ç½®ä¸º 'css/auto' å¦åˆ™è®¾ç½®ä¸º 'css'
        type: 'css/auto',
      },
    ],
  },
};
```

ä¸Šè¿°é…ç½®ä¼šå°†æ‰€æœ‰ `*.sass` å’Œ `*.scss` æ–‡ä»¶ç»è¿‡ [sass-loader](https://github.com/webpack-contrib/sass-loader) å¤„ç†ï¼Œå¹¶å°†ç”Ÿæˆçš„ç»“æœäº¤ç»™ Rspack å®Œæˆ CSS åç»­æµç¨‹çš„å¤„ç†ã€‚

## Less

Rspack æ”¯æŒä½¿ç”¨ [less-loader](https://github.com/webpack-contrib/less-loader)ï¼Œä½ å¯ä»¥è¿™æ ·é…ç½®ï¼š

<PackageManagerTabs command="add less less-loader -D" />

```ts title="rspack.config.js"
module.exports = {
  module: {
    rules: [
      {
        test: /\.less$/,
        use: [
          {
            loader: 'less-loader',
            options: {
              // ...
            },
          },
        ],
        // å¦‚æœä½ éœ€è¦å°† '*.module.less' è§†ä¸º CSS Modules é‚£ä¹ˆå°† 'type' è®¾ç½®ä¸º 'css/auto' å¦åˆ™è®¾ç½®ä¸º 'css'
        type: 'css/auto',
      },
    ],
  },
};
```

ä¸Šè¿°é…ç½®ä¼šå°†æ‰€æœ‰ `*.less` æ–‡ä»¶ç»è¿‡ [less-loader](https://github.com/webpack-contrib/less-loader) å¤„ç†ï¼Œå¹¶å°†ç”Ÿæˆçš„ç»“æœäº¤ç»™ Rspack å®Œæˆ CSS åç»­æµç¨‹çš„å¤„ç†ã€‚

## Tailwind CSS

[Tailwind CSS](https://tailwindcss.com/) æ˜¯ä¸€ä¸ªåŠŸèƒ½ç±»ä¼˜å…ˆçš„ CSS æ¡†æ¶ï¼Œå®ƒé›†æˆäº†ä¸€ç³»åˆ—æ ·å¼ç±»ï¼Œå®ƒä»¬èƒ½ç›´æ¥åœ¨è„šæœ¬æ ‡è®°è¯­è¨€ä¸­ç»„åˆèµ·æ¥ï¼Œæ„å»ºå‡ºä»»ä½•è®¾è®¡ã€‚

å°† Tailwind CSS ä½œä¸º PostCSS æ’ä»¶å®‰è£…ï¼Œæ˜¯å°†å…¶ä¸ Rspack æ•´åˆçš„æœ€ä½³æ–¹å¼ã€‚

### å®‰è£… Tailwind CSS

åœ¨ä½ çš„é¡¹ç›®ä¸­å®‰è£… [tailwindcss](https://tailwindcss.com/)ã€[autoprefixer](https://github.com/postcss/autoprefixer)ã€[postcss](https://postcss.org/) å’Œ [postcss-loader](https://www.npmjs.com/package/postcss-loader) è¿™äº›ä¾èµ–ï¼š

<PackageManagerTabs command="add tailwindcss autoprefixer postcss postcss-loader -D" />

### é…ç½® Tailwind CSS

å®‰è£…å®Œæˆåï¼Œä½ éœ€è¦åœ¨ `rspack.config.js` ä¸­é…ç½® `postcss-loader` æ¥å¤„ç† CSS æ–‡ä»¶ï¼Œç„¶ååœ¨ `postcssOptions.plugins` ä¸­æ·»åŠ  `tailwindcss`ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªå¤„ç† `.css` æ–‡ä»¶çš„é…ç½®ç¤ºä¾‹ï¼Œå¦‚æœä½ éœ€è¦å¤„ç† `.scss` æˆ– `.less` æ–‡ä»¶ï¼Œå¯ä»¥å‚è€ƒè¯¥ç¤ºä¾‹è¿›è¡Œä¿®æ”¹ã€‚

```ts title="rspack.config.js"
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          {
            loader: 'postcss-loader',
            options: {
              postcssOptions: {
                plugins: {
                  tailwindcss: {},
                  autoprefixer: {},
                },
              },
            },
          },
        ],
        type: 'css',
      },
    ],
  },
};
```

åˆ°æ­¤ä¸ºæ­¢ï¼Œä½ å·²ç»å®Œæˆäº†åœ¨ Rspack ä¸­ä½¿ç”¨ Tailwind CSS æ‰€éœ€çš„æ„å»ºé…ç½®ã€‚

æ¥ä¸‹æ¥ä½ å¯ä»¥æŒ‰ç…§ [Tailwind CSS å®˜æ–¹æ–‡æ¡£](https://tailwindcss.com/docs/installation/using-postcss)ä¸­çš„æ­¥éª¤ï¼Œæ·»åŠ  Tailwind CSS æ‰€éœ€çš„é…ç½®å’Œä»£ç ï¼Œå³å¯å¼€å§‹ä½¿ç”¨ã€‚
