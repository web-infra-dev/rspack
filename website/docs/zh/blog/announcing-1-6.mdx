---
date: 2025-10-29 11:00:00
sidebar: false
---

_2025 å¹´ 10 æœˆ 29 æ—¥_

# Rspack 1.6 å‘å¸ƒå…¬å‘Š

![Rspack 1.6](https://assets.rspack.rs/rspack/rspack-banner-v1-6.png)

---

æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒ Rspack 1.6 å·²æ­£å¼å‘å¸ƒï¼

å€¼å¾—å…³æ³¨çš„å˜æ›´å¦‚ä¸‹ï¼š

- æ–°ç‰¹æ€§
  - [å¢å¼º Tree shaking](#å¢å¼º-tree-shaking)
  - [æ”¯æŒ import defer](#æ”¯æŒ-import-defer)
  - [ä¼˜åŒ– ESM äº§ç‰©](#ä¼˜åŒ–-esm-äº§ç‰©)
  - [é»˜è®¤å¯ç”¨ barrel ä¼˜åŒ–](#é»˜è®¤å¯ç”¨-barrel-ä¼˜åŒ–)
  - [layers ç‰¹æ€§ç¨³å®š](#layers-ç‰¹æ€§ç¨³å®š)
  - [ä¿ç•™ JSX è¯­æ³•](#ä¿ç•™-jsx-è¯­æ³•)
  - [æå– source map](#æå–-source-map)
  - [æ€§èƒ½æå‡](#æ€§èƒ½æå‡)
- Rstack è¿›å±•
  - [Rsbuild 1.6](#rsbuild-1-6)
  - [Rspress v2 beta](#rspress-v2-beta)
  - [Rslib 0.16](#rslib-0-16)
  - [Rstest 0.6](#rstest-0-6)
  - [Rsdoctor 1.3](#rsdoctor-1-3)
- ç”Ÿæ€ç³»ç»Ÿ
  - [next-rspack](#next-rspack)

## æ–°åŠŸèƒ½

### å¢å¼º Tree shaking

Rspack 1.6 å¢å¼ºäº†å¯¹åŠ¨æ€å¯¼å…¥ tree shaking çš„æ”¯æŒã€‚åœ¨æ­¤å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒRspack ä»…èƒ½å¯¹åŠ¨æ€å¯¼å…¥ä¸­çš„è§£æ„èµ‹å€¼è¿›è¡Œ tree shakingï¼Œè€Œå…¶ä»–å½¢å¼çš„å¯¼å…¥åˆ™ä¸ä¼šè¢«åˆ†æã€‚

ç°åœ¨ï¼ŒRspack ä¸ºåŠ¨æ€å¯¼å…¥å¼•å…¥äº†æ›´å…¨é¢çš„é™æ€åˆ†æï¼Œèƒ½å¤Ÿè¯†åˆ«å¹¶å¤„ç†å¤šç§ä½¿ç”¨æ¨¡å¼ï¼Œä»è€Œç²¾å‡†åœ°ç§»é™¤æœªè¢«ä½¿ç”¨çš„å¯¼å‡ºå†…å®¹ï¼Œè¿›ä¸€æ­¥å‡å°æœ€ç»ˆæ‰“åŒ…äº§ç‰©çš„ä½“ç§¯ã€‚

```js title="rspack.config.mjs"
// Rspack 1.5 - ä»…æ”¯æŒåˆ†æè§£æ„èµ‹å€¼
const { value } = await import('./module');
console.log(value);

// Rspack 1.6 - æ”¯æŒåˆ†æä»¥ä¸‹æƒ…å†µ
// Case 1
const mod = await import('./module');
const { value } = mod;
console.log(value);

// Case 2
const mod = await import('./module');
console.log(mod.value);

// Case 3
import('./module').then(({ value }) => {
  console.log(value);
});

// Case 4
import('./module').then(mod => {
  const { value } = mod;
  console.log(value);
});

// Case 5
import('./module').then(mod => {
  console.log(mod.value);
});
```

### æ”¯æŒ import defer

Rspack ç°å·²æ”¯æŒ [import defer](https://github.com/tc39/proposal-defer-import-eval) è¯­æ³•ã€‚

`import defer` æ˜¯ JavaScript ä¸­ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œä¹Ÿå·²ç»åœ¨ [TypeScript 5.9](https://devblogs.microsoft.com/typescript/announcing-typescript-5-9-beta/#support-for-import-defer) ä¸­å¾—åˆ°æ”¯æŒï¼Œå®ƒå…è®¸ä½ åœ¨å¯¼å…¥æ¨¡å—æ—¶ä¸ç«‹å³æ‰§è¡Œæ¨¡å—åŠå…¶ä¾èµ–ï¼Œä»è€Œæ›´å¥½åœ°æ§åˆ¶ä»£ç çš„åŠ è½½å’Œå‰¯ä½œç”¨å‘ç”Ÿçš„æ—¶æœºã€‚

```js
import defer * as foo from './foo';
```

ä½ å¯ä»¥é€šè¿‡ [experiments.deferImport](/config/experiments#experimentsdeferimport) å¯ç”¨æ­¤ç‰¹æ€§ï¼š

```js title="rspack.config.mjs"
export default {
  experiments: {
    deferImport: true,
  },
};
```

> ç›®å‰ Rspack ä»…æ”¯æŒ `import defer` è¯­æ³•ï¼Œ`import.defer()` çš„å‡½æ•°å½¢å¼å°†åœ¨åç»­ç‰ˆæœ¬ä¸­å®ç°ã€‚

### ä¼˜åŒ– ESM äº§ç‰©

å¦‚ä½•ä¼˜åŒ– ESM äº§ç‰©ä¸€ç›´æ˜¯ Rspack é¢ä¸´çš„éš¾é¢˜ä¹‹ä¸€ã€‚è¿‡å»æˆ‘ä»¬é€šè¿‡ [module concatenation](/config/optimization#optimizationconcatenatemodules) æ¥ä¼˜åŒ– ESM è¾“å‡ºï¼Œä½†è¿™ç§æ–¹å¼å­˜åœ¨ä¸€äº›å±€é™ï¼š

- **è¾“å‡ºä¸å¤Ÿçº¯å‡€**ï¼šç”Ÿæˆæ–‡ä»¶ä¸­åŒ…å«äº† Rspack è¿è¡Œæ—¶ä»£ç 
- **å¯èƒ½å‡ºé”™**ï¼šæŸäº›æ¨¡å—æ— æ³•è¢«æ­£ç¡®åˆå¹¶ï¼Œå¯èƒ½å¯¼è‡´äº§ç‰©è¡Œä¸ºå¼‚å¸¸
- **æœ‰é™çš„ä»£ç åˆ†å‰²æ”¯æŒ**ï¼šä»£ç åˆ†å‰²åçš„äº§ç‰©ä¼šå˜å¾—å¤æ‚ï¼Œéš¾ä»¥è¿›è¡Œé™æ€åˆ†æå’Œä¼˜åŒ–

ä¸ºäº†å½»åº•è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†å®éªŒæ€§çš„ [EsmLibraryPlugin](/plugins/rspack/esm-library-plugin) æ’ä»¶ï¼Œå®ƒä¸“ä¸ºæ„å»º ESM åº“è®¾è®¡ï¼Œè®©ç”Ÿæˆçš„ä»£ç æ›´åŠ ç®€æ´å’Œé«˜æ•ˆï¼š

- **å®Œå…¨æ¥ç®¡æ‰“åŒ…è¿‡ç¨‹**ï¼šåœ¨ç¼–è¯‘é˜¶æ®µå®Œæˆæ¨¡å—è¿æ¥ï¼Œä¸å†ä¾èµ– Rspack çš„è¿è¡Œæ—¶ä»£ç 
- **æ”¯æŒä»£ç åˆ†å‰²**ï¼šåˆ†å‰²åçš„ä»£ç å¯è¢«é™æ€åˆ†æå’Œ tree shaking å‹å¥½

ä¸‹å›¾å±•ç¤ºäº†ä½¿ç”¨è¯¥æ’ä»¶å‰åçš„ä»£ç åˆ†å‰²äº§ç‰©å¯¹æ¯”ï¼šå·¦ä¾§ä¸ºä¹‹å‰çš„äº§ç‰©ï¼Œå³ä¾§ä¸ºä½¿ç”¨ EsmLibraryPlugin åçš„è¾“å‡ºï¼š

![Rspack 1.6 ESM output diff](https://assets.rspack.rs/rspack/assets/rspack-v1-6-esm-diff.png)

ç›®å‰ï¼ŒEsmLibraryPlugin å·²åŸºæœ¬å¼€å‘å®Œæˆï¼Œå¹¶æ­£åœ¨é›†æˆè‡³ Rslib ä¸­ï¼Œä»¥æä¾›å¼€ç®±å³ç”¨çš„ä½“éªŒã€‚

ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹é…ç½®æ‰‹åŠ¨å¯ç”¨å®ƒï¼š

```js title="rspack.config.mjs"
import { rspack } from '@rspack/core';

export default {
  plugins: [new rspack.experiments.EsmLibraryPlugin()],
  optimization: {
    // Recommended to enable; otherwise, consumers must import runtime code from the entry.
    runtimeChunk: true,
  },
};
```

æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜æä¾›äº† `preserveModules` é€‰é¡¹ï¼Œå¯è®©è¾“å‡ºç»“æ„ä¸æºç ç›®å½•ä¿æŒä¸€è‡´ï¼š

```js title="rspack.config.mjs"
import path from 'node:path';

export default {
  plugins: [
    new rspack.experiments.EsmLibraryPlugin({
      preserveModules: path.resolve(import.meta.dirname, './src'),
    }),
  ],
};
```

### é»˜è®¤å¯ç”¨ barrel ä¼˜åŒ–

åœ¨ Rspack 1.5 ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†å®éªŒæ€§çš„ [lazyBarrel](/config/experiments#experimentslazybarrel) ä¼˜åŒ–åŠŸèƒ½ï¼Œä¸“é—¨ç”¨äºæå‡ barrel æ–‡ä»¶ï¼ˆæ¡¶æ–‡ä»¶ï¼‰çš„æ„å»ºæ€§èƒ½ã€‚ç»è¿‡ä¸€æ®µæ—¶é—´çš„ç”Ÿäº§ç¯å¢ƒå®è·µå’Œç”¨æˆ·åé¦ˆæ”¶é›†ï¼Œæˆ‘ä»¬ç¡®è®¤ lazyBarrel åŠŸèƒ½å·²ç»è¾¾åˆ°ç¨³å®šçŠ¶æ€ï¼Œå› æ­¤åœ¨ Rspack 1.6 ä¸­å°†å…¶è®¾ä¸ºé»˜è®¤å¯ç”¨ã€‚

:::info
ä»€ä¹ˆæ˜¯ barrel æ–‡ä»¶ï¼Ÿ Barrel æ–‡ä»¶æ˜¯æŒ‡é‚£äº›ä¸»è¦ç”¨äºé‡æ–°å¯¼å‡ºå…¶ä»–æ¨¡å—å†…å®¹çš„æ–‡ä»¶ï¼Œé€šå¸¸ç”¨äºç®€åŒ–å¯¼å…¥è·¯å¾„å’Œæä¾›ç»Ÿä¸€çš„ API å…¥å£ã€‚
:::

### layers ç‰¹æ€§ç¨³å®š

layer æ˜¯ä¸€ç§ç”¨äºå¯¹æ¨¡å—è¿›è¡Œåˆ†å±‚ç®¡ç†çš„ç‰¹æ€§ï¼Œå¯ä»¥ç”¨äº React Server Components ç­‰è¿›é˜¶åœºæ™¯ã€‚é€šè¿‡ä¸ºæ¨¡å—æŒ‡å®šä¸åŒçš„ layerï¼Œä½ å¯ä»¥æ›´çµæ´»åœ°æ§åˆ¶å®ƒä»¬çš„æ„å»ºè¡Œä¸ºï¼Œä¾‹å¦‚ï¼š

- å°†ä¸åŒ layer çš„æ¨¡å—ç¼–è¯‘åˆ°ä¸åŒçš„ç›®æ ‡ç¯å¢ƒ
- å°†å®ƒä»¬è¾“å‡ºåˆ°ä¸åŒçš„äº§ç‰©ç›®å½•ä¸­

ä» Rspack 1.6 å¼€å§‹ï¼Œlayer ç‰¹æ€§å·²ç»è¶³å¤Ÿç¨³å®šï¼Œå› æ­¤æˆ‘ä»¬åºŸå¼ƒäº†åŸå…ˆçš„å®éªŒæ€§å¼€å…³ [experiments.layers](/config/experiments#experimentslayers)ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ layer ç‰¹æ€§ï¼Œä¸å†éœ€è¦å®éªŒæ€§å¼€å…³ã€‚

æƒ³äº†è§£æ›´å¤š layer çš„ç»†èŠ‚å’Œä½¿ç”¨æ–¹å¼ï¼Œå¯ä»¥é˜…è¯»æˆ‘ä»¬æ–°å¢çš„ [layer æŒ‡å—](/guide/features/layer#layer)ã€‚

### ä¿ç•™ JSX è¯­æ³•

Rspack ç°åœ¨æ”¯æŒåœ¨äº§ç‰©ä¸­ä¿ç•™ JSX è¯­æ³•ã€‚å½“å¯ç”¨ç›¸å…³é€‰é¡¹æ—¶ï¼ŒRspack åªä¼šå¯¹ JSX è¿›è¡Œè¯­æ³•åˆ†æï¼Œè€Œä¸ä¼šå°†å…¶è½¬æ¢ä¸º JavaScriptã€‚

è¿™ä¸€ç‰¹æ€§åœ¨æ„å»ºä¸€äº›ä½¿ç”¨ JSX çš„åº“æ—¶å°¤å…¶å®ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨ Rslib æ„å»ºç»„ä»¶åº“æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä¿ç•™ JSX åŸæ ·è¾“å‡ºï¼Œç”±æ¶ˆè´¹ç«¯åœ¨ä½¿ç”¨é˜¶æ®µå†å®Œæˆ JSX è½¬æ¢ã€‚

```js title="rspack.config.mjs"
export default {
  module: {
    parser: {
      javascript: {
        jsx: true, // Enable JSX parsing
      },
    },
    rules: [
      {
        test: /\.jsx?$/,
        use: {
          loader: 'builtin:swc-loader',
          options: {
            jsc: {
              parser: { jsx: true },
              transform: {
                // Preserve JSX syntax
                react: { runtime: 'preserve' },
              },
            },
          },
        },
      },
    ],
  },
};
```

### æå– source map

Rspack ç°åœ¨æ”¯æŒé€šè¿‡ [Rule.extractSourceMap](/config/module#ruleextractsourcemap) ä»æ–‡ä»¶ä¸­æå–ç°æœ‰çš„æºç æ˜ å°„æ•°æ®ï¼ˆä»å®ƒä»¬çš„ `//# sourceMappingURL` æ³¨é‡Šä¸­ï¼‰ã€‚è¿™ä¸ªåŠŸèƒ½å¯¹äºä¿ç•™ç¬¬ä¸‰æ–¹åº“æä¾›çš„æºç æ˜ å°„ç‰¹åˆ«æœ‰ç”¨ï¼Œç¡®ä¿å³ä½¿åœ¨è¿™äº›åº“è¢«æ‰“åŒ…æˆ–è½¬æ¢æ—¶ï¼Œè°ƒè¯•ä¿¡æ¯ä»ç„¶ä¿æŒå‡†ç¡®ã€‚

è¿™ä¸ªåŠŸèƒ½å¯ä»¥ä½œä¸º [source-map-loader](https://github.com/webpack-contrib/source-map-loader) çš„å†…ç½®æ›¿ä»£æ–¹æ¡ˆï¼Œæä¾›äº†æ›´å¥½çš„æ€§èƒ½å’Œä¸æ„å»ºè¿‡ç¨‹æ›´ç´§å¯†çš„é›†æˆã€‚

```js title="rspack.config.mjs"
export default {
  module: {
    rules: [
      {
        test: /\.m?js$/,
        extractSourceMap: true,
      },
    ],
  },
};
```

### æ€§èƒ½æå‡

Rspack 1.6 å¸¦æ¥äº†å¤šé¡¹æ€§èƒ½ä¼˜åŒ–ï¼Œç›¸è¾ƒäº Rspack 1.5.0ï¼Œæ€§èƒ½æå‡å¦‚ä¸‹ï¼š

- CLI å¯åŠ¨é€Ÿåº¦æå‡çº¦ **50 ms**
- æ„å»º 10000 ä¸ª React ç»„ä»¶çš„é€Ÿåº¦æå‡ **11%**
- æ„å»ºå¤šä¸ª UI ç»„ä»¶åº“çš„é€Ÿåº¦æå‡ **31%**ï¼ˆå¾—ç›Šäºé»˜è®¤å¯ç”¨çš„ barrel æ–‡ä»¶ä¼˜åŒ–ï¼‰

> æ•°æ®æ¥æºï¼š[Rspack benchmark](https://github.com/rspack-contrib/build-tools-performance)

## Rstack è¿›å±•

[Rstack](/guide/start/ecosystem#rstack) æ˜¯ä¸€ä¸ªä»¥ Rspack ä¸ºæ ¸å¿ƒçš„ JavaScript ç»Ÿä¸€å·¥å…·é“¾ï¼Œå…·æœ‰ä¼˜ç§€çš„æ€§èƒ½å’Œä¸€è‡´çš„æ¶æ„ã€‚

### Rsbuild 1.6

#### è½¬å‘æµè§ˆå™¨æ—¥å¿—

Rsbuild ç°åœ¨ä¼šè‡ªåŠ¨å°†æµè§ˆå™¨ä¸­çš„é”™è¯¯æ—¥å¿—è½¬å‘åˆ°ç»ˆç«¯ï¼Œå¸®åŠ©ä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¾¿æ·åœ°æŸ¥çœ‹è¿è¡Œæ—¶æŠ¥é”™ï¼Œè¿™ä¹Ÿä½¿ Coding Agents èƒ½å¤Ÿä»ç»ˆç«¯æ—¥å¿—ä¸­è·å–æ›´å®Œæ•´çš„ä¸Šä¸‹æ–‡ï¼Œä»è€Œæ›´å¥½åœ°åˆ†æå’Œå®šä½é”™è¯¯ã€‚

![rsbuild-error-forward](https://assets.rspack.rs/rspack/assets/rspack-v1-6-error-forward.png)

å¦‚æœä½ ä¸éœ€è¦è¯¥åŠŸèƒ½ï¼Œå¯ä»¥å°† [dev.browserLogs](https://rsbuild.rs/config/dev/browser-logs) è®¾ç½®ä¸º false æ¥ç¦ç”¨å®ƒï¼š

```js title=rsbuild.config.ts
export default {
  dev: {
    browserLogs: false,
  },
};
```

#### æ„å»º ESM åº”ç”¨

Rsbuild ç°åœ¨æ”¯æŒä¸º Web åº”ç”¨æ„å»º ES Modules æ ¼å¼äº§ç‰©ï¼Œåªéœ€å¯ç”¨ [output.module: true](https://rsbuild.rs/zh/config/output/module) å³å¯ï¼š

```ts title="rsbuild.config.ts"
export default {
  output: {
    module: true,
  },
};
```

å¯ç”¨åï¼ŒRsbuild å°†ä¸å†é»˜è®¤ç”Ÿæˆ IIFE æ ¼å¼çš„è„šæœ¬ï¼Œè€Œæ˜¯è¾“å‡ºæ ‡å‡†çš„ ESM æ ¼å¼ï¼Œå¹¶è‡ªåŠ¨å°†ç”Ÿæˆçš„ `<script>` æ ‡ç­¾è®¾ç½®ä¸º `type="module"`ã€‚

#### æ›´å¿«åœ°åŠ è½½é…ç½®æ–‡ä»¶

ç”±äº Node.js 22 å·²ç»åŸç”Ÿæ”¯æŒäº† TypeScriptï¼ŒRsbuild ç°åœ¨é»˜è®¤ä¼šä½¿ç”¨ Node.js çš„åŸç”ŸåŠ è½½å™¨æ¥è§£æé…ç½®æ–‡ä»¶ï¼›å¦‚æœåŠ è½½å¤±è´¥ï¼Œåˆ™ä¼šè‡ªåŠ¨å›é€€åˆ° [Jiti](https://github.com/unjs/jiti)ã€‚åœ¨ä½¿ç”¨ Node.js 22 åŠä»¥ä¸Šç‰ˆæœ¬æ—¶ï¼Œè¿™ä¸€æœºåˆ¶èƒ½å¤Ÿç¡®ä¿æ¨¡å—è§£æè¡Œä¸ºä¸ Node.js åŸç”Ÿä¿æŒä¸€è‡´ï¼ŒåŒæ—¶å¸¦æ¥æ›´å¥½çš„åŠ è½½æ€§èƒ½ã€‚

ä½ ä¹Ÿå¯ä»¥é€šè¿‡ Rsbuild CLI çš„ --config-loader é€‰é¡¹æ‰‹åŠ¨æŒ‡å®šåŠ è½½æ–¹å¼ï¼š

```bash
# å¼ºåˆ¶ä½¿ç”¨åŸç”ŸåŠ è½½
rsbuild build --config-loader native

# å¼ºåˆ¶ä½¿ç”¨ Jiti åŠ è½½
rsbuild build --config-loader jiti
```

### Rspress v2 beta

#### æ–°ä¸»é¢˜é¢„è§ˆ

Rspress çš„æ–°ä¸»é¢˜å·²è¿›å…¥é¢„è§ˆé˜¶æ®µï¼Œå¹¶å·²ç»ä¸Šçº¿è‡³ v2 å®˜ç½‘ã€‚ğŸ‰

æ–°ä¸»é¢˜åœ¨è§†è§‰ä¸äº¤äº’è®¾è®¡ä¸Šè¿›è¡Œäº†å…¨é¢å‡çº§ï¼Œå¸¦æ¥æ›´æ²‰æµ¸ã€æ›´èˆ’é€‚çš„æ–‡æ¡£é˜…è¯»ä½“éªŒã€‚åŒæ—¶å¼€æ”¾äº†æ›´å¤šçš„ä¸»é¢˜æ¥å£ä¸ CSS ç±»åï¼Œæ–¹ä¾¿å¼€å‘è€…è‡ªç”±åœ°å®šåˆ¶ UIã€‚

> ğŸ‘‰ å‰å¾€ [Rspress v2 å®˜ç½‘](https://v2.rspress.rs/) ä½“éªŒ

![rspress-v2-theme](https://assets.rspack.rs/rspack/assets/rspack-v1-6-rspress.gif)

#### å­é¡µé¢åˆ‡æ¢

Rspress V2 æ–°å¢ [PageTabs](https://v2.rspress.rs/zh/ui/components/page-tabs) ç»„ä»¶ï¼Œå¯åœ¨åŒä¸€é¡µé¢ä¸­åˆ›å»ºå¤šä¸ªå­æ ‡ç­¾é¡µï¼Œå°†é•¿ç¯‡å†…å®¹è‡ªç„¶æ‹†åˆ†ä¸ºç»“æ„æ¸…æ™°çš„å­é¡µé¢ã€‚

![Rspress å­é¡µé¢åˆ‡æ¢ç»„ä»¶](https://assets.rspack.rs/rspack/assets/rspack-v1-6-page-tabs.png)

### Rslib 0.16

#### æ›´å¿«çš„ç±»å‹ç”Ÿæˆ

Rslib ç°åœ¨æ”¯æŒåŸºäº [typescript-go](https://github.com/microsoft/typescript-go) ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶ï¼Œä½ åªéœ€å¼€å¯ [dts.tsgo](https://rslib.rs/zh/config/lib/dts#dtstsgo)ï¼Œå³å¯è®©ç±»å‹æ£€æŸ¥å’Œç±»å‹ç”Ÿæˆçš„æ€§èƒ½æå‡çº¦ **300%**ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­æ”¶ç›Šæ›´ä¸ºæ˜æ˜¾ã€‚

```ts title="rslib.config.ts"
export default {
  lib: [
    {
      dts: { tsgo: true },
    },
  ],
};
```

#### ä¿ç•™ JSX è¯­æ³•

Rslib ç°åœ¨æ”¯æŒåœ¨æ„å»ºäº§ç‰©ä¸­ä¿ç•™åŸå§‹ JSXï¼Œåªéœ€å°† runtime è®¾ç½®ä¸º [`'preserve'`](https://rsbuild.rs/zh/plugins/list/plugin-react#preserve) å³å¯ã€‚åœ¨è¯¥æ¨¡å¼ä¸‹ï¼ŒJSX è¯­æ³•å°†ä¿ç•™åŸæ ·ï¼Œä¸åšä»»ä½•è½¬æ¢ï¼Œæ–¹ä¾¿åç»­ç”±å…¶ä»–æ‰“åŒ…å·¥å…·å¤„ç†ã€‚

```ts title="rslib.config.ts"
import { pluginReact } from '@rsbuild/plugin-react';

export default {
  lib: [
    {
      bundle: false,
      format: 'esm',
    },
  ],
  plugins: [
    pluginReact({
      swcReactOptions: {
        runtime: 'preserve',
      },
    }),
  ],
};
```

#### æ›´å¤š CLI é€‰é¡¹

Rslib çš„ build å‘½ä»¤ä¸­æ”¯æŒäº†æ›´å¤šçš„ [CLI é€‰é¡¹](https://rslib.rs/zh/guide/basic/cli#rslib-build)ï¼Œè¿™äº›é€‰é¡¹çš„ä¼˜å…ˆçº§é«˜äºé…ç½®æ–‡ä»¶ã€‚

```json title="package.json"
{
  "scripts": {
    "build": "rslib build --entry index.ts --minify --tsconfig tsconfig.build.json"
  }
}
```

è¿™å…è®¸ä½ åœ¨æ²¡æœ‰é…ç½®æ–‡ä»¶çš„æƒ…å†µä¸‹ä½¿ç”¨ Rslibï¼ŒCLI å°†è‡ªåŠ¨ä½¿ç”¨ä»…åŒ…å«å•ä¸ª [lib](https://rslib.rs/zh/config/lib/) çš„é»˜è®¤é…ç½®ï¼Œå¹¶æ ¹æ®å‘½ä»¤è¡Œå‚æ•°å®Œæˆæ„å»ºã€‚

### Rstest 0.6

#### VS Code æ‰©å±•

[Rstest VS Code æ‰©å±•](https://marketplace.visualstudio.com/items?itemName=rstack.rstest) å·²å‘å¸ƒï¼Œå®ƒå…è®¸ä½ åœ¨ç¼–è¾‘å™¨ä¸­å‘ç°ã€è¿è¡Œå’Œè°ƒè¯•æµ‹è¯•ç”¨ä¾‹ï¼Œå¸®åŠ©ä½ é«˜æ•ˆåœ°ç®¡ç†æµ‹è¯•ç”¨ä¾‹ã€å¿«é€ŸæŸ¥çœ‹æµ‹è¯•ç»“æœã€‚

![rstest-vscode-extension](https://assets.rspack.rs/rspack/assets/rspack-v1-6-rstest-vscode-ext.gif)

#### è¦†ç›–ç‡æ”¯æŒ

Rstest ç°å·²æ”¯æŒä½¿ç”¨ istanbul æ”¶é›†ä»£ç è¦†ç›–ç‡å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Šï¼Œè¯¦è§ [Rstest - ä»£ç è¦†ç›–ç‡](https://rstest.rs/zh/config/test/coverage)ã€‚

![rstest-coverage](https://assets.rspack.rs/rspack/assets/rspack-v1-6-rstest-cov.png)

### Rsdoctor 1.3

#### Rsdoctor GitHub Actions

Rsdoctor ç°åœ¨æä¾›äº† [GitHub bundle diff action](https://github.com/web-infra-dev/rsdoctor-action)ï¼Œå¯ä»¥åœ¨ CI é˜¶æ®µè‡ªåŠ¨æ£€æµ‹å’Œå¯¹æ¯”æ„å»ºäº§ç‰©çš„ä½“ç§¯å˜åŒ–ï¼Œå¸®åŠ©å›¢é˜ŸåŠæ—¶å‘ç°å¹¶é¢„é˜²åŒ…ä½“ç§¯åŠ£åŒ–ã€‚

![Rsdoctor GitHub Actions](https://assets.rspack.rs/rspack/assets/rspack-v1-6-bundle-diff.png)

#### å•ä¸€ JSON æ•°æ®æŠ¥å‘Š

Rsdoctor ç°æ”¯æŒåœ¨ Brief æ¨¡å¼ä¸‹å¯¼å‡º [å•ä¸€ JSON æŠ¥å‘Šæ–‡ä»¶](https://rsdoctor.rs/zh/config/options/output#mode-brief)ï¼Œè¯¥æ–‡ä»¶å¯æ–¹ä¾¿åœ°ç”¨äºå­˜å‚¨ã€åˆ†äº«æˆ–äºŒæ¬¡æ•°æ®åˆ†æã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬æ–°å¢äº† [Playground é¡µé¢](https://rsdoctor.rs/zh/guide/start/playground)ï¼Œå¼€å‘è€…å¯ä»¥ä¸Šä¼  JSON æŠ¥å‘Šæ–‡ä»¶ï¼Œé‡æ–°æ‰“å¼€å¹¶å¯è§†åŒ–æŸ¥çœ‹åˆ†æç»“æœã€‚

## ç”Ÿæ€

### next-rspack

åœ¨ Next.js 16 ä¸­ï¼Œnext-rspack å·²æ¥å…¥ Rspack çš„ [å®šåˆ¶ Rust binding æ–¹æ¡ˆ](https://github.com/rspack-contrib/rspack-binding-template)ï¼Œå¸¦æ¥äº†å¯è§‚çš„æ€§èƒ½æå‡ï¼š

- build æ€§èƒ½æå‡ 24%
- dev æ€§èƒ½æå‡ 10%

åœ¨å®šåˆ¶çš„ Rspack Rust binding ä¸­ï¼Œæˆ‘ä»¬å°† Next.js çš„ `externals` é€»è¾‘è¿ç§»åˆ° Rust ä¾§ï¼Œæ˜¾è‘—å‡å°‘äº† JS ä¸ Rust ä¹‹é—´çš„é€šä¿¡å¼€é”€ã€‚

| å·¥å…·                 | build æ—¶é—´ï¼ˆæ— ç¼“å­˜ï¼‰ | dev æ—¶é—´ï¼ˆæ— ç¼“å­˜ï¼‰ |
| -------------------- | -------------------- | ------------------ |
| Rspack (next@16.0.0) | 3.8s                 | 1.7s               |
| Rspack (next@15.4.0) | 5.0s                 | 1.9s               |
| webpack              | 14.0s                | 7.8s               |

åŸºå‡†æµ‹è¯•åŸºäº [chakra-ui-docs](https://github.com/SyMind/chakra-ui-docs/tree/next-rspack) ä»“åº“è¿›è¡Œï¼Œå®Œæ•´çš„æ€§èƒ½æ•°æ®å¯åœ¨æ­¤æŸ¥çœ‹ï¼š[PERF.md](https://github.com/SyMind/chakra-ui-docs/blob/next-rspack/PERF.md)ã€‚

## å‡çº§æŒ‡å—

### å‡çº§ SWC æ’ä»¶

å¦‚æœä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨äº† SWC Wasm æ’ä»¶ï¼ˆå¦‚ `@swc/plugin-emotion` ç­‰ï¼‰ï¼Œéœ€è¦å°†æ’ä»¶å‡çº§è‡³å…¼å®¹ `swc_core@46` çš„ç‰ˆæœ¬ï¼Œå¦åˆ™å¯èƒ½å› ç‰ˆæœ¬ä¸å…¼å®¹å¯¼è‡´æ„å»ºæŠ¥é”™ã€‚

> è¯¦æƒ…è¯·æŸ¥é˜…ï¼š[å¸¸è§é—®é¢˜ - SWC æ’ä»¶ç‰ˆæœ¬ä¸åŒ¹é…](/errors/swc-plugin-version)ã€‚

### ç§»é™¤ `experiments.layer`

`experiments.layer` é€‰é¡¹å·²ç»åºŸå¼ƒï¼Œå¯ä»¥ç›´æ¥ç§»é™¤ï¼š

```diff title="rspack.config.mjs"
export default {
-  experiments: {
-   layer: true,
-  },
};
```
