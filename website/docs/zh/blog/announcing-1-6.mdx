---
date: 2025-10-29 11:00:00
sidebar: false
---

_2025 å¹´ 10 æœˆ 29 æ—¥_

# Rspack 1.6 å‘å¸ƒå…¬å‘Š

![Rspack 1.6](https://assets.rspack.rs/rspack/rspack-banner-v1-6.png)

---

æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒ Rspack 1.6 å·²æ­£å¼å‘å¸ƒï¼

å€¼å¾—å…³æ³¨çš„å˜æ›´å¦‚ä¸‹ï¼š

- æ–°ç‰¹æ€§
  - [ä¼˜åŒ– ESM äº§ç‰©](#ä¼˜åŒ–-esm-äº§ç‰©)
  - [å¢å¼º Tree shaking](#å¢å¼º-tree-shaking)
  - [æ”¯æŒ import defer](#æ”¯æŒ-import-defer)
  - [é»˜è®¤å¯ç”¨ barrel ä¼˜åŒ–](#é»˜è®¤å¯ç”¨-barrel-ä¼˜åŒ–)
  - [layers ç‰¹æ€§ç¨³å®š](#layers-ç‰¹æ€§ç¨³å®š)
  - [ä¿ç•™ JSX è¯­æ³•](#ä¿ç•™-jsx-è¯­æ³•)
  - [æå– source map](#æå–-source-map)
  - [æ€§èƒ½æå‡](#æ€§èƒ½æå‡)
- Rstack è¿›å±•
  - [Rsbuild 1.6](#rsbuild-1-6)
  - [Rspress v2 beta](#rspress-v2-beta)
  - [Rslib 0.16](#rslib-0-16)
  - [Rstest 0.6](#rstest-0-6)
  - [Rsdoctor 1.3](#rsdoctor-1-3)
- ç”Ÿæ€ç³»ç»Ÿ
  - [next-rspack](#next-rspack)

## æ–°åŠŸèƒ½

### ä¼˜åŒ– ESM äº§ç‰©

æ–°çš„ [EsmLibraryPlugin](/plugins/rspack/esm-library-plugin) ç°åœ¨ä½œä¸ºå®éªŒæ€§åŠŸèƒ½å¼€å§‹å¯ç”¨ï¼Œä¸“é—¨ç”¨äºæ„å»º ESM åº“ï¼Œè®©ç”Ÿæˆçš„ä»£ç æ›´åŠ ç®€æ´å’Œé«˜æ•ˆã€‚

ESM åº“æ„å»ºä¸€ç›´æ˜¯ Rspack çš„ä¸€ä¸ªéš¾ç‚¹ã€‚ä¹‹å‰æˆ‘ä»¬ä½¿ç”¨ [concatenateModules](/config/optimization#optimizationconcatenatemodules) æ¥ä¼˜åŒ– ESM è¾“å‡ºï¼Œä½†è¿™ç§æ–¹å¼æœ‰ä¸€äº›é—®é¢˜ï¼š

- **è¾“å‡ºå†…å®¹ä¸å¤Ÿçº¯å‡€**ï¼šç”Ÿæˆçš„æ–‡ä»¶åŒ…å«äº†å¾ˆå¤š Rspack å†…éƒ¨çš„è¿è¡Œæ—¶ä»£ç ï¼Œè€Œä¸æ˜¯ä½ çœŸæ­£æƒ³è¦å¯¼å‡ºçš„åŠŸèƒ½
- **å®¹æ˜“å‡ºé”™**ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ¨¡å—æ— æ³•æ­£ç¡®è¢« concatenateModules ä¼˜åŒ–ï¼Œå¯¼è‡´æœ€ç»ˆçš„åº“æ–‡ä»¶å‡ºç°æ„å¤–é”™è¯¯
- ä»£ç åˆ†å‰²åäº§ç‰©ä¼šå˜å¾—å¤æ‚ï¼Œæ— æ³•é™æ€åˆ†æ

**æ–°çš„è§£å†³æ–¹æ¡ˆ**

ä¸ºäº†å½»åº•è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ¨å‡ºäº† EsmLibraryPlugin æ’ä»¶ï¼š

- **å®Œå…¨æ¥ç®¡æ‰“åŒ…è¿‡ç¨‹**ï¼šä¸å†ä¾èµ– Rspack çš„é»˜è®¤è¿è¡Œæ—¶ï¼Œè€Œæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µå°±æŠŠæ‰€æœ‰æ¨¡å—æ­£ç¡®è¿æ¥èµ·æ¥
- **æ”¯æŒä»£ç åˆ†å‰²**ï¼šä»£ç åˆ†å‰²åçš„äº§ç‰©å¯ä»¥è¢«å¾ˆå¥½çš„é™æ€åˆ†æå’Œ tree shaking

> ä¸‹é¢çš„å¯¹æ¯”å›¾æ¸…æ™°ç›´è§‚å±•ç¤ºäº†ä»£ç åˆ†å‰²åäº§ç‰©çš„ä¸åŒï¼Œå·¦ä¸ºç°åœ¨ Rspack çš„äº§ç‰©ï¼Œ å³ä¸º EsmLibraryPlugin æ’ä»¶ç”Ÿæ•ˆçš„äº§ç‰©ï¼š

<img
  src="https://assets.rspack.rs/rspack/assets/rspack-v1-6-esm-diff.png"
  alt="Rspack 1.6 ESM output diff"
  width="760"
/>

ç›®å‰ EsmLibraryPlugin è¿˜åœ¨å¼€å‘é˜¶æ®µï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„é…ç½®ä½“éªŒï¼Œæœªæ¥ä¼šä»¥é…ç½®çš„å½¢å¼è¿›è¡Œå¼€å¯ã€‚

```js title="rspack.config.mjs"
import { rspack } from '@rspack/core';

export default {
  plugins: [new rspack.experiments.EsmLibraryPlugin()],
  optimization: {
    runtimeChunk: true, // recommended to enable runtime chunk, otherwise consumers need to import runtime code from entry
  },
};
```

æˆ‘ä»¬è¿˜æä¾›äº†å®éªŒæ€§çš„ preserveModules ç‰¹æ€§æ”¯æŒï¼Œäº§ç‰©ç»“æ„å¯ä»¥æŒ‰ç…§æºç ç»“æ„ä¿ç•™ã€‚

```js title="rspack.config.mjs"
import path from 'path';

export default {
  plugins: [
    new rspack.experiments.EsmLibraryPlugin({
      preserveModules: path.resolve(__dirname, './src'),
    }),
  ],
  optimization: {
    runtimeChunk: true, // recommended to enable runtime chunk, otherwise consumers need to import runtime code from entry
  },
};
```

### å¢å¼º Tree shaking

Rspack 1.6 å¢å¼ºäº†å¯¹åŠ¨æ€å¯¼å…¥ï¼ˆ`import()` tree shaking çš„æ”¯æŒã€‚æ­¤å‰ï¼ŒRspack ä»…èƒ½å¯¹åŠ¨æ€å¯¼å…¥ä¸­çš„è§£æ„èµ‹å€¼è¿›è¡Œ tree shakingï¼Œè€Œå…¶ä»–å½¢å¼çš„å¯¼å…¥åˆ™ä¸ä¼šè¢«åˆ†æã€‚

Rspack ç°åœ¨ä¸ºåŠ¨æ€å¯¼å…¥å¼•å…¥äº†å…¨é¢çš„é™æ€åˆ†æï¼Œèƒ½å¤Ÿè¯†åˆ«å¹¶å¤„ç†å¤šæ ·åŒ–çš„ä½¿ç”¨æ¨¡å¼ï¼Œä»è€Œç²¾å‡†åœ°ç§»é™¤æœªè¢«ä½¿ç”¨çš„å¯¼å‡ºå†…å®¹ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–æ‰“åŒ…äº§ç‰©çš„ä½“ç§¯ã€‚

```js title="rspack.config.mjs"
// Rspack 1.5 - ä»…æ”¯æŒåˆ†æè§£æ„èµ‹å€¼
const { value } = await import('./module');
console.log(value);

// Rspack 1.6 - æ”¯æŒåˆ†æä»¥ä¸‹æƒ…å†µ
const mod = await import('./module');
const { value } = mod;
console.log(value);

const mod = await import('./module');
console.log(mod.value);

import('./module').then(({ value }) => {
  console.log(value);
});

import('./module').then(mod => {
  const { value } = mod;
  console.log(value);
});

import('./module').then(mod => {
  console.log(mod.value);
});
```

### æ”¯æŒ import defer

Rspack ç°å·²æ”¯æŒ [import defer](https://github.com/tc39/proposal-defer-import-eval) è¯­æ³•ã€‚`import defer` æ˜¯ JavaScript ä¸­ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå®ƒå·²ç»åœ¨ [TypeScript 5.9](https://devblogs.microsoft.com/typescript/announcing-typescript-5-9-beta/#support-for-import-defer) ä¸­å¾—åˆ°æ”¯æŒï¼Œå®ƒå…è®¸ä½ åœ¨å¯¼å…¥æ¨¡å—æ—¶ä¸ç«‹å³æ‰§è¡Œæ¨¡å—åŠå…¶ä¾èµ–ï¼Œä»è€Œæ›´å¥½åœ°æ§åˆ¶ä»£ç çš„åŠ è½½å’Œå‰¯ä½œç”¨å‘ç”Ÿçš„æ—¶æœºã€‚

```js
import defer * as foo from './foo';
```

ä½ å¯ä»¥é€šè¿‡ [experiments.deferImport](/config/experiments#experimentsdeferimport) å¯ç”¨æ­¤ç‰¹æ€§ï¼š

```js title="rspack.config.mjs"
export default {
  experiments: {
    deferImport: true,
  },
};
```

> ç›®å‰ Rspack ä»…æ”¯æŒ `import defer` è¯­æ³•ï¼Œ`import.defer()` çš„å‡½æ•°å½¢å¼å°†åœ¨åç»­ç‰ˆæœ¬ä¸­å®ç°ã€‚

### é»˜è®¤å¯ç”¨ barrel ä¼˜åŒ–

åœ¨ Rspack 1.5 ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†å®éªŒæ€§çš„ [lazyBarrel](/config/experiments#experimentslazybarrel) ä¼˜åŒ–åŠŸèƒ½ï¼Œä¸“é—¨ç”¨äºæå‡ barrel æ–‡ä»¶ï¼ˆæ¡¶æ–‡ä»¶ï¼‰çš„æ„å»ºæ€§èƒ½ã€‚ç»è¿‡ä¸€æ®µæ—¶é—´çš„ç”Ÿäº§ç¯å¢ƒå®è·µå’Œç”¨æˆ·åé¦ˆæ”¶é›†ï¼Œæˆ‘ä»¬ç¡®è®¤ lazyBarrel åŠŸèƒ½å·²ç»è¾¾åˆ°ç¨³å®šçŠ¶æ€ï¼Œå› æ­¤åœ¨ Rspack 1.6 ä¸­å°†å…¶è®¾ä¸ºé»˜è®¤å¯ç”¨ã€‚

:::info
ä»€ä¹ˆæ˜¯ barrel æ–‡ä»¶ï¼Ÿ Barrel æ–‡ä»¶æ˜¯æŒ‡é‚£äº›ä¸»è¦ç”¨äºé‡æ–°å¯¼å‡ºå…¶ä»–æ¨¡å—å†…å®¹çš„æ–‡ä»¶ï¼Œé€šå¸¸ç”¨äºç®€åŒ–å¯¼å…¥è·¯å¾„å’Œæä¾›ç»Ÿä¸€çš„ API å…¥å£ã€‚
:::

### layers ç‰¹æ€§ç¨³å®š

layer æ˜¯ä¸€ç§ç”¨äºå¯¹æ¨¡å—è¿›è¡Œåˆ†å±‚ç®¡ç†çš„ç‰¹æ€§ï¼Œå¯ä»¥ç”¨äº React Server Components ç­‰è¿›é˜¶åœºæ™¯ã€‚é€šè¿‡ä¸ºæ¨¡å—æŒ‡å®šä¸åŒçš„ layerï¼Œä½ å¯ä»¥æ›´çµæ´»åœ°æ§åˆ¶å®ƒä»¬çš„æ„å»ºè¡Œä¸ºï¼Œä¾‹å¦‚ï¼š

- å°†ä¸åŒ layer çš„æ¨¡å—ç¼–è¯‘åˆ°ä¸åŒçš„ç›®æ ‡ç¯å¢ƒ
- å°†å®ƒä»¬è¾“å‡ºåˆ°ä¸åŒçš„äº§ç‰©ç›®å½•ä¸­

ä» Rspack 1.6 å¼€å§‹ï¼Œlayer ç‰¹æ€§å·²ç»è¶³å¤Ÿç¨³å®šï¼Œå› æ­¤æˆ‘ä»¬åºŸå¼ƒäº†åŸå…ˆçš„å®éªŒæ€§å¼€å…³ [experiments.layers](/config/experiments#experimentslayers)ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ layer ç‰¹æ€§ï¼Œä¸å†éœ€è¦å®éªŒæ€§å¼€å…³ã€‚

æƒ³äº†è§£æ›´å¤š layer çš„ç»†èŠ‚å’Œä½¿ç”¨æ–¹å¼ï¼Œå¯ä»¥é˜…è¯»æˆ‘ä»¬æ–°å¢çš„ [layer æŒ‡å—](/guide/features/layer#layer)ã€‚

### ä¿ç•™ JSX è¯­æ³•

Rspack ç°åœ¨æ”¯æŒåœ¨äº§ç‰©ä¸­ä¿ç•™ JSX è¯­æ³•ã€‚å½“å¯ç”¨ç›¸å…³é€‰é¡¹æ—¶ï¼ŒRspack åªä¼šå¯¹ JSX è¿›è¡Œè¯­æ³•åˆ†æï¼Œè€Œä¸ä¼šå°†å…¶è½¬æ¢ä¸º JavaScriptã€‚

è¿™ä¸€ç‰¹æ€§åœ¨æ„å»ºä¸€äº›ä½¿ç”¨ JSX çš„åº“æ—¶å°¤å…¶å®ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨ Rslib æ„å»ºç»„ä»¶åº“æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä¿ç•™ JSX åŸæ ·è¾“å‡ºï¼Œç”±æ¶ˆè´¹ç«¯åœ¨ä½¿ç”¨é˜¶æ®µå†å®Œæˆ JSX è½¬æ¢ã€‚

```js title="rspack.config.mjs"
export default {
  module: {
    parser: {
      javascript: {
        jsx: true, // Enable JSX parsing
      },
    },
    rules: [
      {
        test: /\.jsx?$/,
        use: {
          loader: 'builtin:swc-loader',
          options: {
            jsc: {
              parser: { jsx: true },
              transform: {
                // Preserve JSX syntax
                react: { runtime: 'preserve' },
              },
            },
          },
        },
      },
    ],
  },
};
```

### æå– source map

Rspack ç°åœ¨æ”¯æŒé€šè¿‡ [Rule.extractSourceMap](/config/module#ruleextractsourcemap) ä»æ–‡ä»¶ä¸­æå–ç°æœ‰çš„æºç æ˜ å°„æ•°æ®ï¼ˆä»å®ƒä»¬çš„ `//# sourceMappingURL` æ³¨é‡Šä¸­ï¼‰ã€‚è¿™ä¸ªåŠŸèƒ½å¯¹äºä¿ç•™ç¬¬ä¸‰æ–¹åº“æä¾›çš„æºç æ˜ å°„ç‰¹åˆ«æœ‰ç”¨ï¼Œç¡®ä¿å³ä½¿åœ¨è¿™äº›åº“è¢«æ‰“åŒ…æˆ–è½¬æ¢æ—¶ï¼Œè°ƒè¯•ä¿¡æ¯ä»ç„¶ä¿æŒå‡†ç¡®ã€‚

è¿™ä¸ªåŠŸèƒ½å¯ä»¥ä½œä¸º [source-map-loader](https://github.com/webpack-contrib/source-map-loader) çš„å†…ç½®æ›¿ä»£æ–¹æ¡ˆï¼Œæä¾›äº†æ›´å¥½çš„æ€§èƒ½å’Œä¸æ„å»ºè¿‡ç¨‹æ›´ç´§å¯†çš„é›†æˆã€‚

```js title="rspack.config.mjs"
export default {
  module: {
    rules: [
      {
        test: /\.m?js$/,
        extractSourceMap: true,
      },
    ],
  },
};
```

### æ€§èƒ½æå‡

Rspack 1.6 å¸¦æ¥äº†å¤šé¡¹æ€§èƒ½ä¼˜åŒ–ï¼Œç›¸è¾ƒäº Rspack 1.5.0ï¼Œæ€§èƒ½æå‡å¦‚ä¸‹ï¼š

- CLI å¯åŠ¨é€Ÿåº¦æå‡çº¦ **50 ms**
- æ„å»º 10 000 ä¸ª React ç»„ä»¶çš„é€Ÿåº¦æå‡ **11%**
- æ„å»ºå¤šä¸ª UI ç»„ä»¶åº“çš„é€Ÿåº¦æå‡ **31%**ï¼ˆå¾—ç›Šäºé»˜è®¤å¯ç”¨çš„ barrel æ–‡ä»¶ä¼˜åŒ–ï¼‰

> æ•°æ®æ¥æºï¼š[Rspack benchmark](https://github.com/rspack-contrib/build-tools-performance)

## Rstack è¿›å±•

[Rstack](/guide/start/ecosystem#rstack) æ˜¯ä¸€ä¸ªä»¥ Rspack ä¸ºæ ¸å¿ƒçš„ JavaScript ç»Ÿä¸€å·¥å…·é“¾ï¼Œå…·æœ‰ä¼˜ç§€çš„æ€§èƒ½å’Œä¸€è‡´çš„æ¶æ„ã€‚

### Rsbuild 1.6

#### è½¬å‘æµè§ˆå™¨æ—¥å¿—

Rsbuild ç°åœ¨ä¼šè‡ªåŠ¨å°†æµè§ˆå™¨ä¸­çš„é”™è¯¯æ—¥å¿—è½¬å‘åˆ°ç»ˆç«¯ï¼Œå¸®åŠ©ä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¾¿æ·åœ°æŸ¥çœ‹è¿è¡Œæ—¶æŠ¥é”™ï¼Œè¿™ä¹Ÿä½¿ Coding Agents èƒ½å¤Ÿä»ç»ˆç«¯æ—¥å¿—ä¸­è·å–æ›´å®Œæ•´çš„ä¸Šä¸‹æ–‡ï¼Œä»è€Œæ›´å¥½åœ°åˆ†æå’Œå®šä½é”™è¯¯ã€‚

<img
  src="https://assets.rspack.rs/rspack/assets/rspack-v1-6-error-forward.png"
  alt="rsbuild-error-forward"
  width="600"
/>

å¦‚æœä½ ä¸éœ€è¦è¯¥åŠŸèƒ½ï¼Œå¯ä»¥å°† [dev.browserLogs](https://rsbuild.rs/config/dev/browser-logs) è®¾ç½®ä¸º false æ¥ç¦ç”¨å®ƒï¼š

```js title=rsbuild.config.ts
// rsbuild.config.ts
export default {
  dev: {
    browserLogs: false,
  },
};
```

#### æ„å»º ESM åº”ç”¨

Rsbuild ç°åœ¨æ”¯æŒä¸º Web åº”ç”¨æ„å»º ES Modules æ ¼å¼äº§ç‰©ï¼Œåªéœ€å¯ç”¨ [output.module: true](https://rsbuild.rs/zh/config/output/module) å³å¯ï¼š

```ts title="rsbuild.config.ts"
export default {
  output: {
    module: true,
  },
};
```

å¯ç”¨åï¼ŒRsbuild å°†ä¸å†é»˜è®¤ç”Ÿæˆ IIFE æ ¼å¼çš„è„šæœ¬ï¼Œè€Œæ˜¯è¾“å‡ºæ ‡å‡†çš„ ESM æ ¼å¼ï¼Œå¹¶è‡ªåŠ¨å°†ç”Ÿæˆçš„ `<script>` æ ‡ç­¾è®¾ç½®ä¸º `type="module"`ã€‚

#### æ›´å¿«åœ°åŠ è½½é…ç½®æ–‡ä»¶

ç”±äº Node.js 22 å·²ç»åŸç”Ÿæ”¯æŒäº† TypeScriptï¼ŒRsbuild ç°åœ¨é»˜è®¤ä¼šä½¿ç”¨ Node.js çš„åŸç”ŸåŠ è½½å™¨æ¥è§£æé…ç½®æ–‡ä»¶ï¼›å¦‚æœåŠ è½½å¤±è´¥ï¼Œåˆ™ä¼šè‡ªåŠ¨å›é€€åˆ° [Jiti](https://github.com/unjs/jiti)ã€‚åœ¨ä½¿ç”¨ Node.js 22 åŠä»¥ä¸Šç‰ˆæœ¬æ—¶ï¼Œè¿™ä¸€æœºåˆ¶èƒ½å¤Ÿç¡®ä¿æ¨¡å—è§£æè¡Œä¸ºä¸ Node.js åŸç”Ÿä¿æŒä¸€è‡´ï¼ŒåŒæ—¶å¸¦æ¥æ›´å¥½çš„åŠ è½½æ€§èƒ½ã€‚

ä½ ä¹Ÿå¯ä»¥é€šè¿‡ Rsbuild CLI çš„ --config-loader é€‰é¡¹æ‰‹åŠ¨æŒ‡å®šåŠ è½½æ–¹å¼ï¼š

```bash
# å¼ºåˆ¶ä½¿ç”¨åŸç”ŸåŠ è½½
rsbuild build --config-loader native

# å¼ºåˆ¶ä½¿ç”¨ Jiti åŠ è½½
rsbuild build --config-loader jiti
```

### Rspress v2 beta

#### æ–°ä¸»é¢˜é¢„è§ˆ

Rspress çš„æ–°ä¸»é¢˜å·²è¿›å…¥é¢„è§ˆé˜¶æ®µï¼Œå¹¶å·²ç»ä¸Šçº¿è‡³ v2 å®˜ç½‘ã€‚ğŸ‰

æ–°ä¸»é¢˜åœ¨è§†è§‰ä¸äº¤äº’è®¾è®¡ä¸Šè¿›è¡Œäº†å…¨é¢å‡çº§ï¼Œå¸¦æ¥æ›´æ²‰æµ¸ã€æ›´èˆ’é€‚çš„æ–‡æ¡£é˜…è¯»ä½“éªŒã€‚åŒæ—¶å¼€æ”¾äº†æ›´å¤šçš„ä¸»é¢˜æ¥å£ä¸ CSS ç±»åï¼Œæ–¹ä¾¿å¼€å‘è€…è‡ªç”±åœ°å®šåˆ¶ UIã€‚

> ğŸ‘‰ å‰å¾€ [Rspress v2 å®˜ç½‘](https://v2.rspress.rs/) ä½“éªŒ

![rspress-v2-theme](https://assets.rspack.rs/rspack/assets/rspack-v1-6-rspress.gif)

#### å­é¡µé¢åˆ‡æ¢

Rspress V2 æ–°å¢ [PageTabs](https://v2.rspress.rs/zh/ui/components/page-tabs) ç»„ä»¶ï¼Œå¯åœ¨åŒä¸€é¡µé¢ä¸­åˆ›å»ºå¤šä¸ªå­æ ‡ç­¾é¡µï¼Œå°†é•¿ç¯‡å†…å®¹è‡ªç„¶æ‹†åˆ†ä¸ºç»“æ„æ¸…æ™°çš„å­é¡µé¢ã€‚

<img
  width="600"
  src="https://assets.rspack.rs/rspack/assets/rspack-v1-6-page-tabs.png"
  alt="Rspress å­é¡µé¢åˆ‡æ¢ç»„ä»¶"
/>

### Rslib 0.16

#### æ›´å¿«çš„ç±»å‹ç”Ÿæˆ

Rslib ç°åœ¨æ”¯æŒåŸºäº [tsgo](https://github.com/microsoft/typescript-go) ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶ï¼Œåªéœ€å¼€å¯ [dts.tsgo](https://rslib.rs/zh/config/lib/dts#dtstsgo) å³å¯ã€‚è¿™å¯ä»¥å¸¦æ¥å¤§çº¦ 2.5 ~ 3 å€çš„ç±»å‹ç”Ÿæˆæ€§èƒ½æå‡ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­æ”¶ç›Šæ›´ä¸ºæ˜æ˜¾ã€‚

```ts title="rslib.config.ts"
export default {
  lib: [
    {
      dts: {
        tsgo: true,
      },
    },
  ],
};
```

#### ä¿ç•™ JSX è¯­æ³•

Rslib ç°åœ¨æ”¯æŒåœ¨æ„å»ºäº§ç‰©ä¸­ä¿ç•™åŸå§‹ JSXï¼Œåªéœ€å°† runtime è®¾ç½®ä¸º [`'preserve'`](https://rsbuild.rs/zh/plugins/list/plugin-react#preserve) å³å¯ã€‚åœ¨è¯¥æ¨¡å¼ä¸‹ï¼ŒJSX è¯­æ³•å°†ä¿ç•™åŸæ ·ï¼Œä¸åšä»»ä½•è½¬æ¢ï¼Œæ–¹ä¾¿åç»­ç”±å…¶ä»–æ‰“åŒ…å·¥å…·å¤„ç†ã€‚

```ts title="rslib.config.ts"
import { pluginReact } from '@rsbuild/plugin-react';

export default {
  lib: [
    {
      bundle: false,
      format: 'esm',
    },
  ],
  plugins: [
    pluginReact({
      swcReactOptions: {
        runtime: 'preserve',
      },
    }),
  ],
};
```

#### CLI å¢å¼º

Rslib åœ¨ build å‘½ä»¤ä¸­æ”¯æŒäº†[é¢å¤–çš„ CLI é€‰é¡¹](https://rslib.rs/zh/guide/basic/cli#rslib-build)ï¼Œè¿™äº›é€‰é¡¹çš„ä¼˜å…ˆçº§é«˜äºé…ç½®æ–‡ä»¶ã€‚

```json title="package.json"
{
  "scripts": {
    "build": "rslib build --entry index.ts --minify --tsconfig tsconfig.build.json"
  }
}
```

ä½ ä¹Ÿå¯ä»¥åœ¨æ²¡æœ‰é…ç½®æ–‡ä»¶çš„æƒ…å†µä¸‹ä½¿ç”¨ Rslibï¼ŒCLI å°†è‡ªåŠ¨ä½¿ç”¨ä»…åŒ…å«å•ä¸ª [lib](https://rslib.rs/zh/config/lib/) çš„é»˜è®¤é…ç½®ï¼Œå¹¶æ ¹æ®å‘½ä»¤è¡Œå‚æ•°å®Œæˆæ„å»ºã€‚

### Rstest 0.6

#### VS Code æ‰©å±•

Rstest [VS Code æ‰©å±•](https://marketplace.visualstudio.com/items?itemName=rstack.rstest)å¯ä»¥è½»æ¾å‘ç°ã€è¿è¡Œå’Œè°ƒè¯• Rstest æµ‹è¯•ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿé«˜æ•ˆåœ°ç®¡ç†æµ‹è¯•ç”¨ä¾‹ï¼Œå¿«é€ŸæŸ¥çœ‹æµ‹è¯•ç»“æœã€‚

![rstest-vscode-extension](https://assets.rspack.rs/rspack/assets/rspack-v1-6-rstest-vscode-ext.gif)

#### è¦†ç›–ç‡æ”¯æŒ

Rstest æ”¯æŒä½¿ç”¨ istanbul æ”¶é›†ä»£ç è¦†ç›–ç‡å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Šã€‚

<img
  src="https://assets.rspack.rs/rspack/assets/rspack-v1-6-rstest-cov.png"
  alt="rstest-coverage"
  width="600"
/>

æ›´å¤šä¿¡æ¯å¯æŸ¥çœ‹ [Rstest - ä»£ç è¦†ç›–ç‡](https://rstest.rs/zh/config/test/coverage)ã€‚

### Rsdoctor 1.3

#### Rsdoctor GitHub Actions

Rsdoctor æ”¯æŒäº† GitHub bundle diff actionï¼Œå¯åœ¨ GitHub CI é˜¶æ®µè¿›è¡Œ bundle åŠ£åŒ–æ£€æµ‹ã€‚

> https://github.com/web-infra-dev/rsdoctor-action

<img
  width="600"
  src="https://assets.rspack.rs/rspack/assets/rspack-v1-6-bundle-diff.png"
  alt="Rsdoctor GitHub Actions"
/>

#### å•ä¸€ JSON æ•°æ®æŠ¥å‘Š

æ”¯æŒåœ¨ Brief æ¨¡å¼ä¸‹å¯¼å‡ºå•ä¸€ JSON æŠ¥å‘Šæ•°æ®ï¼Œç”¨æˆ·å¯å¯¹è¯¥ JSON æ–‡ä»¶è¿›è¡Œäº‘å­˜å‚¨ã€åˆ†äº«ä»¥åŠäºŒæ¬¡æ•°æ®å¤„ç†ã€‚åŒæ—¶ï¼Œæ–°å¢äº† Playground é¡µé¢ï¼Œå¯é€šè¿‡ä¸Šä¼  JSON æ–‡ä»¶å†æ¬¡æ‰“å¼€æŠ¥å‘Šã€‚

ğŸ‘‰ [Playground Document](https://rsdoctor.rs/zh/guide/start/playground)

ğŸ‘‰ [All-in-one JSON](https://rsdoctor.rs/zh/config/options/output#mode-brief)

## ç”Ÿæ€

### next-rspack

åœ¨ next@16.0.0 ä¸­ä½¿ç”¨ä¸º Next.js å®šåˆ¶çš„ Rspack Rust bindingï¼Œå¸¦æ¥æ˜¾è‘—æ€§èƒ½æå‡ï¼š

- æ„å»ºé€Ÿåº¦æå‡ 24%
- å¼€å‘é€Ÿåº¦æå‡ 10%

åœ¨å®šåˆ¶çš„ Rspack Rust binding ä¸­ï¼Œæˆ‘ä»¬å°† externals é€»è¾‘è¿ç§»åˆ° Rustï¼Œæå¤§å‡å°‘äº† JS ä¸ Rust ä¹‹é—´çš„é€šä¿¡å¼€é”€ã€‚

| Tool                           | Build without cache | Dev without cache |
| ------------------------------ | ------------------- | ----------------- |
| Rspack(next@16.0.0-canary.7)   | 3.8s                | 1.7s              |
| Rspack(next@15.4.0-canary.123) | 5.0s                | 1.9s              |
| Webpack                        | 14.0s               | 7.8s              |

Benchmark ä½¿ç”¨çš„ä»“åº“ä¸º [chakra-ui-docs](https://github.com/SyMind/chakra-ui-docs/tree/next-rspack)ï¼Œå¯ä»¥åœ¨ä»“åº“ä¸­æŸ¥çœ‹è¯¦ç»†çš„æ€§èƒ½æ•°æ®ï¼šhttps://github.com/SyMind/chakra-ui-docs/blob/next-rspack/PERF.md
