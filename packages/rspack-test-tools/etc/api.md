## API Report File for "@rspack/test-tools"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

/// <reference types="jest" />
/// <reference types="node" />

import { Compiler } from '@rspack/core';
import { Compiler as Compiler_2 } from 'webpack';
import type { Configuration } from 'webpack';
import EventEmitter from 'events';
import { ITestCompilerManager as ITestCompilerManager_2 } from '../type';
import { RspackOptions } from '@rspack/core';
import { RspackOptionsNormalized } from '@rspack/core';
import { RspackPluginInstance } from '@rspack/core';
import { Stats } from '@rspack/core';
import type { Stats as Stats_2 } from 'webpack';
import { StatsCompilation } from '@rspack/core';
import type { StatsCompilation as StatsCompilation_2 } from 'webpack';
import { StatsError } from '@rspack/core';
import { StatsWarnings } from '@rspack/core';
import { WebpackOptionsNormalized } from 'webpack';

// @public (undocumented)
export class BasicRunnerFactory<T extends ECompilerType> implements TRunnerFactory<T> {
    constructor(name: string, context: ITestContext);
    // (undocumented)
    protected context: ITestContext;
    // (undocumented)
    create(file: string, compilerOptions: TCompilerOptions<T>, env: ITestEnv): ITestRunner;
    // (undocumented)
    protected createRunner(file: string, stats: TCompilerStatsCompilation<T>, compilerOptions: TCompilerOptions<T>, env: ITestEnv): ITestRunner;
    // (undocumented)
    protected getRunnerKey(file: string): string;
    // (undocumented)
    protected name: string;
}

// @public (undocumented)
export class BasicTaskProcessor<T extends ECompilerType = ECompilerType.Rspack> implements ITestProcessor {
    constructor(_options: IBasicProcessorOptions<T>);
    // (undocumented)
    after(context: ITestContext): Promise<void>;
    // (undocumented)
    afterAll(context: ITestContext): Promise<void>;
    // (undocumented)
    before(context: ITestContext): Promise<void>;
    // (undocumented)
    beforeAll(context: ITestContext): Promise<void>;
    // (undocumented)
    build(context: ITestContext): Promise<void>;
    // (undocumented)
    check(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    compiler(context: ITestContext): Promise<void>;
    // (undocumented)
    config(context: ITestContext): Promise<void>;
    // (undocumented)
    protected getCompiler(context: ITestContext): ITestCompilerManager_2<T>;
    // (undocumented)
    protected _options: IBasicProcessorOptions<T>;
    // (undocumented)
    run(env: ITestEnv, context: ITestContext): Promise<void>;
}

// @public (undocumented)
export function compareContent(sourceContent: string | false, distContent: string | false, compareOptions: ICompareOptions): TCompareResult;

// @public (undocumented)
export function compareFile(sourceFile: string, distFile: string, compareOptions: ICompareOptions): TFileCompareResult;

// @public (undocumented)
export function compareModules(modules: string[], sourceModules: Map<string, string>, distModules: Map<string, string>, compareOptions: ICompareOptions): TModuleCompareResult[];

// @public (undocumented)
export function createBuiltinCase(name: string, src: string, dist: string): void;

// @public (undocumented)
export function createCompilerCase(name: string, src: string, dist: string, testConfig: string): void;

// @public (undocumented)
export function createConfigCase(name: string, src: string, dist: string): void;

// @public (undocumented)
export function createDefaultsCase(src: string): void;

// @public (undocumented)
export function createDiagnosticCase(name: string, src: string, dist: string): void;

// @public (undocumented)
export function createDiffCase(name: string, src: string, dist: string): void;

// @public (undocumented)
export function createErrorCase(name: string, src: string, dist: string, testConfig: string): void;

// @public (undocumented)
export function createHashCase(name: string, src: string, dist: string): void;

// @public (undocumented)
export function createHookCase(name: string, src: string, dist: string, source: string): void;

// @public (undocumented)
export function createHotCase(name: string, src: string, dist: string, target: TCompilerOptions<ECompilerType.Rspack>["target"]): void;

// @public (undocumented)
export function createHotStepCase(name: string, src: string, dist: string, target: TCompilerOptions<ECompilerType.Rspack>["target"]): void;

// @public (undocumented)
export function createNormalCase(name: string, src: string, dist: string): void;

// @public (undocumented)
export function createStatsAPICase(name: string, src: string, dist: string, testConfig: string): void;

// @public (undocumented)
export function createStatsOutputCase(name: string, src: string, dist: string): void;

// @public (undocumented)
export function createTreeShakingCase(name: string, src: string, dist: string): void;

// @public (undocumented)
export function createWatchCase(name: string, src: string, dist: string, temp: string): void;

// @public (undocumented)
export class DefaultsConfigTaskProcessor extends SimpleTaskProcessor<ECompilerType.Rspack> {
    constructor(_defaultsConfigOptions: IDefaultsConfigProcessorOptions);
    // (undocumented)
    static addSnapshotSerializer(): void;
    // (undocumented)
    after(context: ITestContext): Promise<void>;
    // (undocumented)
    afterAll(context: ITestContext): Promise<void>;
    // (undocumented)
    before(context: ITestContext): Promise<void>;
    // (undocumented)
    beforeAll(context: ITestContext): Promise<void>;
    // (undocumented)
    build(context: ITestContext): Promise<void>;
    // (undocumented)
    check(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    compiler(context: ITestContext): Promise<void>;
    // (undocumented)
    protected _defaultsConfigOptions: IDefaultsConfigProcessorOptions;
    // (undocumented)
    protected getCompiler(context: ITestContext): ITestCompilerManager_2<ECompilerType.Rspack>;
    // (undocumented)
    static getDefaultConfig(cwd: string, config: TCompilerOptions<ECompilerType.Rspack>): TCompilerOptions<ECompilerType.Rspack>;
    // (undocumented)
    run(env: ITestEnv, context: ITestContext): Promise<void>;
}

// @public (undocumented)
export function describeByWalk(testFile: string, createCase: (name: string, src: string, dist: string) => void, options?: {
    type?: "file" | "directory";
    level?: number;
    source?: string;
    dist?: string;
    absoluteDist?: boolean;
}): void;

// @public (undocumented)
export class DiffComparator {
    constructor(options: IDiffComparatorOptions);
    // (undocumented)
    compare(): Promise<void>;
}

// @public (undocumented)
export class DiffHtmlReporter implements ITestReporter<TModuleCompareResult[]> {
    constructor(options: IDiffHtmlReporterOptions);
    // (undocumented)
    failure(id: string): Promise<void>;
    // (undocumented)
    increment(id: string, data: TModuleCompareResult[]): Promise<void>;
    // (undocumented)
    init(data?: TModuleCompareResult[]): Promise<void>;
    // (undocumented)
    output(): Promise<void>;
}

// @public (undocumented)
export class DiffProcessor implements ITestProcessor {
    constructor(options: IDiffProcessorOptions);
    // (undocumented)
    build(context: ITestContext): Promise<void>;
    // (undocumented)
    check(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    compiler(context: ITestContext): Promise<void>;
    // (undocumented)
    config(context: ITestContext): Promise<void>;
}

// @public (undocumented)
export class DiffStatsReporter implements ITestReporter<TModuleCompareResult[]> {
    constructor(options: IDiffStatsReporterOptions);
    // (undocumented)
    failure(id: string): Promise<void>;
    // (undocumented)
    increment(id: string, data: TModuleCompareResult[]): Promise<void>;
    // (undocumented)
    init(data?: TModuleCompareResult[]): Promise<void>;
    // (undocumented)
    output(): Promise<void>;
}

// @public (undocumented)
export enum ECompareResultType {
    // (undocumented)
    Different = "different",
    // (undocumented)
    Missing = "missing",
    // (undocumented)
    OnlyDist = "only-dist",
    // (undocumented)
    OnlySource = "only-source",
    // (undocumented)
    Same = "same"
}

// @public (undocumented)
export enum ECompilerType {
    // (undocumented)
    Rspack = "rspack",
    // (undocumented)
    Webpack = "webpack"
}

// @public (undocumented)
export enum EEsmMode {
    // (undocumented)
    Evaluated = 1,
    // (undocumented)
    Unknown = 0,
    // (undocumented)
    Unlinked = 2
}

// @public (undocumented)
export class ErrorTaskProcessor<T extends ECompilerType> extends SimpleTaskProcessor<T> {
    constructor(_errorOptions: IErrorTaskProcessorOptions<T>);
    // (undocumented)
    static addSnapshotSerializer(): void;
    // (undocumented)
    check(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    compiler(context: ITestContext): Promise<void>;
    // (undocumented)
    protected _errorOptions: IErrorTaskProcessorOptions<T>;
    // (undocumented)
    run(env: ITestEnv, context: ITestContext): Promise<void>;
}

// @public (undocumented)
export function escapeEOL(str: string): string;

// @public (undocumented)
export function escapeSep(str: string): string;

// @public (undocumented)
export function formatCode(name: string, raw: string, options: IFormatCodeOptions): string;

// @public (undocumented)
export function getSimpleProcessorRunner(src: string, dist: string, options?: {
    env?: () => ITestEnv;
    context?: (src: string, dist: string) => ITestContext;
}): (name: string, processor: ITestProcessor) => Promise<void>;

// @public (undocumented)
export class HookCasesContext extends TestContext {
    constructor(src: string, testName: string, options: TTestContextOptions);
    // @internal (undocumented)
    _addSnapshot(content: unknown, name: string, group: string | number): void;
    // @internal (undocumented)
    collectSnapshots(options?: {
        diff: {};
    }): Promise<void>;
    // (undocumented)
    protected count: number;
    // (undocumented)
    protected options: TTestContextOptions;
    // (undocumented)
    protected promises: Promise<void>[];
    snapped(cb: (...args: unknown[]) => Promise<unknown>, prefix?: string): (this: any, ...args: unknown[]) => Promise<unknown>;
    // (undocumented)
    protected snapshots: Record<string | number, Array<[string | Buffer, string]>>;
    // (undocumented)
    protected snapshotsList: Array<string | number>;
    // (undocumented)
    protected src: string;
    // (undocumented)
    protected testName: string;
}

// @public (undocumented)
export class HookTaskProcessor extends SnapshotProcessor<ECompilerType.Rspack> {
    constructor(_hookOptions: IHookProcessorOptions<ECompilerType.Rspack>);
    // (undocumented)
    check(env: ITestEnv, context: HookCasesContext): Promise<void>;
    // (undocumented)
    compiler(context: ITestContext): Promise<void>;
    // (undocumented)
    config(context: ITestContext): Promise<void>;
    // (undocumented)
    protected _hookOptions: IHookProcessorOptions<ECompilerType.Rspack>;
}

// @public (undocumented)
export class HotRunnerFactory<T extends ECompilerType> extends BasicRunnerFactory<T> {
    // (undocumented)
    protected createRunner(file: string, stats: TCompilerStatsCompilation<T>, compilerOptions: TCompilerOptions<T>, env: ITestEnv): ITestRunner;
}

// @public (undocumented)
export class HotStepRunnerFactory<T extends ECompilerType> extends HotRunnerFactory<T> {
    // (undocumented)
    protected createRunner(file: string, stats: TCompilerStatsCompilation<T>, compilerOptions: TCompilerOptions<T>, env: ITestEnv): ITestRunner;
}

// @public (undocumented)
export interface IBasicGlobalContext {
    // (undocumented)
    [key: string]: any;
    // (undocumented)
    clearTimeout: typeof clearTimeout;
    // (undocumented)
    console: Console;
    // (undocumented)
    expect: jest.Expect;
    // (undocumented)
    setTimeout: typeof setTimeout;
}

// @public (undocumented)
export interface IBasicModuleScope extends ITestEnv {
    // (undocumented)
    [key: string]: any;
    // (undocumented)
    console: Console;
    // (undocumented)
    expect: jest.Expect;
    // (undocumented)
    jest: typeof jest;
}

// @public (undocumented)
export interface IBasicProcessorOptions<T extends ECompilerType = ECompilerType.Rspack> {
    // (undocumented)
    compilerType: T;
    // (undocumented)
    configFiles?: string[];
    // (undocumented)
    defaultOptions?: (context: ITestContext) => TCompilerOptions<T>;
    // (undocumented)
    findBundle?: (context: ITestContext, options: TCompilerOptions<T>) => string[] | string | void;
    // (undocumented)
    name: string;
    // (undocumented)
    overrideOptions?: (context: ITestContext, options: TCompilerOptions<T>) => void;
    // (undocumented)
    runable: boolean;
}

// @public (undocumented)
export interface ICompareOptions {
    // (undocumented)
    bootstrap?: boolean;
    // (undocumented)
    detail?: boolean;
    // (undocumented)
    format: IFormatCodeOptions;
    // (undocumented)
    modules?: TCompareModules;
    // (undocumented)
    renameModule?: (name: string) => string;
    // (undocumented)
    runtimeModules?: TCompareModules;
}

// @public (undocumented)
export interface IDefaultsConfigProcessorOptions {
    // (undocumented)
    cwd?: string;
    // (undocumented)
    diff: (diff: any, defaults: any) => Promise<void>;
    // (undocumented)
    name: string;
    // (undocumented)
    options?: (context: ITestContext) => TCompilerOptions<ECompilerType.Rspack>;
}

// @public (undocumented)
export interface IDiffComparatorOptions {
    // (undocumented)
    bootstrap?: boolean;
    // (undocumented)
    files: string[];
    // (undocumented)
    formatOptions?: IFormatCodeOptions;
    // (undocumented)
    modules?: TCompareModules;
    // (undocumented)
    reporters: ITestReporter<unknown>[];
    // (undocumented)
    rspackDist: string;
    // (undocumented)
    runtimeModules?: TCompareModules;
    // (undocumented)
    webpackDist: string;
}

// @public (undocumented)
export interface IDiffHtmlReporterOptions {
    // (undocumented)
    dist: string;
    // (undocumented)
    ignore?: RegExp;
}

// @public (undocumented)
export interface IDiffProcessorOptions extends IFormatCodeOptions {
    // (undocumented)
    bootstrap?: boolean;
    // (undocumented)
    detail?: boolean;
    // (undocumented)
    files?: string[];
    // (undocumented)
    modules?: TCompareModules;
    // (undocumented)
    onCompareFile?: (file: string, result: TFileCompareResult) => void;
    // (undocumented)
    onCompareModules?: (file: string, results: TModuleCompareResult[]) => void;
    // (undocumented)
    onCompareRuntimeModules?: (file: string, results: TModuleCompareResult[]) => void;
    // (undocumented)
    rspackPath: string;
    // (undocumented)
    runtimeModules?: TCompareModules;
    // (undocumented)
    webpackPath: string;
}

// @public (undocumented)
export interface IDiffStatsReporterOptions {
    // (undocumented)
    file: string;
    // (undocumented)
    footer?: string[];
    // (undocumented)
    header?: string[];
    // (undocumented)
    report?: boolean;
}

// @public (undocumented)
export interface IErrorTaskProcessorOptions<T extends ECompilerType> {
    // (undocumented)
    build?: (context: ITestContext, compiler: TCompiler<T>) => Promise<void>;
    // (undocumented)
    check?: (stats: TStatsDiagnostics) => Promise<void>;
    // (undocumented)
    compilerType: T;
    // (undocumented)
    name: string;
    // (undocumented)
    options?: (options: TCompilerOptions<T>, context: ITestContext) => TCompilerOptions<T>;
}

// @public (undocumented)
export interface IFormatCodeOptions {
    // (undocumented)
    ignoreBlockOnlyStatement: boolean;
    // (undocumented)
    ignoreCssFilePath: boolean;
    // (undocumented)
    ignoreIfCertainCondition: boolean;
    // (undocumented)
    ignoreModuleArguments: boolean;
    // (undocumented)
    ignoreModuleId: boolean;
    // (undocumented)
    ignoreObjectPropertySequence: boolean;
    // (undocumented)
    ignorePropertyQuotationMark: boolean;
    // (undocumented)
    ignoreSwcHelpersPath: boolean;
    // (undocumented)
    replacements?: Record<string, string>;
}

// @public (undocumented)
export interface IHookProcessorOptions<T extends ECompilerType> extends ISnapshotProcessorOptions<T> {
    // (undocumented)
    check?: (context: ITestContext) => Promise<void>;
    // (undocumented)
    compiler?: (context: ITestContext, compiler: TCompiler<T>) => Promise<void>;
    // (undocumented)
    options?: (context: ITestContext) => TCompilerOptions<T>;
}

// @public (undocumented)
export interface IMultiTaskProcessorOptions<T extends ECompilerType = ECompilerType.Rspack> {
    // (undocumented)
    compilerType: ECompilerType.Rspack;
    // (undocumented)
    configFiles?: string[];
    // (undocumented)
    defaultOptions?: (index: number, context: ITestContext) => TCompilerOptions<T>;
    // (undocumented)
    findBundle?: (index: number, context: ITestContext, options: TCompilerOptions<T>) => string[] | string | void;
    // (undocumented)
    name: string;
    // (undocumented)
    overrideOptions?: (index: number, context: ITestContext, options: TCompilerOptions<T>) => void;
    // (undocumented)
    runable: boolean;
}

// @public (undocumented)
export interface IRspackBuiltinProcessorOptions {
    // (undocumented)
    name: string;
    // (undocumented)
    snapshot: string;
    // (undocumented)
    snapshotFileFilter?: ISnapshotProcessorOptions<ECompilerType.Rspack>["snapshotFileFilter"];
}

// @public (undocumented)
export interface IRspackConfigProcessorOptions<T extends ECompilerType.Rspack> {
    // (undocumented)
    name: string;
    // (undocumented)
    runable: boolean;
}

// @public (undocumented)
export interface IRspackDiagnosticProcessorOptions {
    // (undocumented)
    name: string;
}

// @public (undocumented)
export interface IRspackHashProcessorOptions {
    // (undocumented)
    name: string;
}

// @public (undocumented)
export interface IRspackHotProcessorOptions {
    // (undocumented)
    name: string;
    // (undocumented)
    target: TCompilerOptions<ECompilerType.Rspack>["target"];
}

// @public (undocumented)
export interface IRspackHotStepProcessorOptions extends IRspackHotProcessorOptions {
}

// @public (undocumented)
export interface IRspackStatsProcessorOptions<T extends ECompilerType.Rspack> {
    // (undocumented)
    name: string;
}

// @public (undocumented)
export interface IRspackWatchProcessorOptions {
    // (undocumented)
    experiments?: TRspackExperiments;
    // (undocumented)
    name: string;
    // (undocumented)
    optimization?: TRspackOptimization;
    // (undocumented)
    runable: boolean;
    // (undocumented)
    stepName: string;
    // (undocumented)
    tempDir: string;
}

// @public (undocumented)
export interface IRspackWatchStepProcessorOptions {
    // (undocumented)
    name: string;
    // (undocumented)
    runable: boolean;
    // (undocumented)
    stepName: string;
    // (undocumented)
    tempDir: string;
}

// @public (undocumented)
export const isDirectory: (p: string) => boolean;

// @public (undocumented)
export const isFile: (p: string) => boolean;

// @public (undocumented)
export interface ISimpleProcessorOptions<T extends ECompilerType = ECompilerType.Rspack> {
    // (undocumented)
    build?: (context: ITestContext, compiler: TCompiler<T>) => Promise<void>;
    // (undocumented)
    check?: (context: ITestContext, compiler: TCompiler<T>, stats: TCompilerStats<T>) => Promise<void>;
    // (undocumented)
    compiler?: (context: ITestContext, compiler: TCompiler<T>) => Promise<void>;
    // (undocumented)
    compilerType: T;
    // (undocumented)
    name: string;
    // (undocumented)
    options?: (context: ITestContext) => TCompilerOptions<T>;
}

// @public (undocumented)
export interface ISnapshotProcessorOptions<T extends ECompilerType> extends IBasicProcessorOptions<T> {
    // (undocumented)
    snapshot: string;
    // (undocumented)
    snapshotFileFilter?: (file: string) => boolean;
}

// @public (undocumented)
export interface IStatsAPITaskProcessorOptions<T extends ECompilerType> {
    // (undocumented)
    build?: (context: ITestContext, compiler: TCompiler<T>) => Promise<void>;
    // (undocumented)
    check?: (stats: TCompilerStats<T>, compiler: TCompiler<T>) => Promise<void>;
    // (undocumented)
    compilerType: T;
    // (undocumented)
    cwd?: string;
    // (undocumented)
    name: string;
    // (undocumented)
    options?: (context: ITestContext) => TCompilerOptions<T>;
}

// @public (undocumented)
export const isValidCaseDirectory: (name: string) => boolean;

// @public (undocumented)
export interface ITestCompilerManager<T extends ECompilerType> {
    // (undocumented)
    build(): Promise<TCompilerStats<T>>;
    // (undocumented)
    close(): Promise<void>;
    // (undocumented)
    createCompiler(): TCompiler<T>;
    // (undocumented)
    getCompiler(): TCompiler<T> | null;
    // (undocumented)
    getEmitter(): EventEmitter;
    // (undocumented)
    getOptions(): TCompilerOptions<T>;
    // (undocumented)
    getStats(): TCompilerStats<T> | null;
    // (undocumented)
    mergeOptions(newOptions: TCompilerOptions<T>): TCompilerOptions<T>;
    // (undocumented)
    setOptions(newOptions: TCompilerOptions<T>): TCompilerOptions<T>;
    // (undocumented)
    watch(timeout?: number): void;
}

// @public (undocumented)
export interface ITestContext {
    // (undocumented)
    clearError(name?: string): void;
    // (undocumented)
    emitError(name: string, err: Error | string): void;
    // (undocumented)
    getCompiler<T extends ECompilerType>(name: string, type: T | void): ITestCompilerManager<T>;
    // (undocumented)
    getDist(sub?: string): string;
    // (undocumented)
    getError(name?: string): Error[];
    // (undocumented)
    getNames(): string[];
    // (undocumented)
    getRunner(key: string): ITestRunner | null;
    // (undocumented)
    getRunnerFactory<T extends ECompilerType>(name: string): TRunnerFactory<T> | null;
    // (undocumented)
    getSource(sub?: string): string;
    // (undocumented)
    getTemp(sub?: string): string | null;
    // (undocumented)
    getTestConfig<T extends ECompilerType>(): TTestConfig<T>;
    // (undocumented)
    getValue<T>(name: string, key: string): T | void;
    // (undocumented)
    hasError(name?: string): boolean;
    // (undocumented)
    setRunner(key: string, runner: ITestRunner): void;
    // (undocumented)
    setValue<T>(name: string, key: string, value: T): void;
}

// @public (undocumented)
export interface ITestEnv {
    // (undocumented)
    afterEach: (...args: any[]) => void;
    // (undocumented)
    beforeEach: (...args: any[]) => void;
    // (undocumented)
    it: (...args: any[]) => void;
}

// @public (undocumented)
export interface ITester {
    // (undocumented)
    check(env: ITestEnv): Promise<void>;
    // (undocumented)
    compile(): Promise<void>;
    // (undocumented)
    next(): boolean;
    // (undocumented)
    prepare(): Promise<void>;
    // (undocumented)
    resume(): Promise<void>;
    // (undocumented)
    step: number;
    // (undocumented)
    total: number;
}

// @public (undocumented)
export interface ITesterConfig {
    // (undocumented)
    dist: string;
    // (undocumented)
    name: string;
    // (undocumented)
    runnerFactory?: new (name: string, context: ITestContext) => TRunnerFactory<ECompilerType>;
    // (undocumented)
    src: string;
    // (undocumented)
    steps?: ITestProcessor[];
    // (undocumented)
    temp?: string;
    // (undocumented)
    testConfig?: TTestConfig<ECompilerType>;
}

// @public (undocumented)
export interface ITestLoader {
    // (undocumented)
    walk(): Promise<void>;
}

// @public (undocumented)
export interface ITestProcessor {
    // (undocumented)
    after?(context: ITestContext): Promise<void>;
    // (undocumented)
    afterAll?(context: ITestContext): Promise<void>;
    // (undocumented)
    before?(context: ITestContext): Promise<void>;
    // (undocumented)
    beforeAll?(context: ITestContext): Promise<void>;
    // (undocumented)
    build?(context: ITestContext): Promise<void>;
    // (undocumented)
    check?(env: ITestEnv, context: ITestContext): Promise<unknown>;
    // (undocumented)
    compiler?(context: ITestContext): Promise<void>;
    // (undocumented)
    config?(context: ITestContext): Promise<void>;
    // (undocumented)
    run?(env: ITestEnv, context: ITestContext): Promise<void>;
}

// @public (undocumented)
export interface ITestReporter<T> {
    // (undocumented)
    failure(id: string): Promise<void>;
    // (undocumented)
    increment(id: string, data: T): Promise<void>;
    // (undocumented)
    init(data?: T): Promise<void>;
    // (undocumented)
    output(): Promise<void>;
}

// @public (undocumented)
export interface ITestRunner {
    // (undocumented)
    getGlobal(name: string): unknown;
    // (undocumented)
    getRequire(): TRunnerRequirer;
    // (undocumented)
    run(file: string): Promise<unknown>;
}

// @public (undocumented)
export class MultipleRunnerFactory<T extends ECompilerType> extends BasicRunnerFactory<T> {
    // (undocumented)
    protected createRunner(file: string, stats: TCompilerStatsCompilation<T>, compilerOptions: TCompilerOptions<T>, env: ITestEnv): ITestRunner;
    // (undocumented)
    protected getFileIndexHandler(file: string): {
        getIndex: () => number[];
        flagIndex: () => Set<string>;
    };
    // (undocumented)
    protected getRunnerKey(file: string): string;
    // (undocumented)
    protected runned: Set<string>;
}

// @public (undocumented)
export class MultiTaskProcessor<T extends ECompilerType = ECompilerType.Rspack> extends BasicTaskProcessor<T> implements ITestProcessor {
    constructor(_multiOptions: IMultiTaskProcessorOptions<T>);
    // (undocumented)
    config(context: ITestContext): Promise<void>;
    // (undocumented)
    protected multiCompilerOptions: TCompilerOptions<T>[];
    // (undocumented)
    protected _multiOptions: IMultiTaskProcessorOptions<T>;
}

// @public (undocumented)
export class NormalRunnerFactory<T extends ECompilerType> extends BasicRunnerFactory<T> {
    // (undocumented)
    protected createRunner(file: string, stats: TCompilerStatsCompilation<T>, compilerOptions: TCompilerOptions<T>, env: ITestEnv): ITestRunner;
}

// @public (undocumented)
export function parseModules(content: string, options?: {
    bootstrap?: boolean;
}): {
    modules: Map<string, string>;
    runtimeModules: Map<string, string>;
};

// @public (undocumented)
export function readConfigFile<T extends ECompilerType>(files: string[]): TCompilerOptions<T>[];

// @public (undocumented)
export function replaceModuleArgument(raw: string): string;

// @public (undocumented)
export function replaceRuntimeModuleName(raw: string): string;

// @public (undocumented)
export class RspackBuiltinProcessor extends SnapshotProcessor<ECompilerType.Rspack> {
    constructor(_builtinOptions: IRspackBuiltinProcessorOptions);
    // (undocumented)
    protected _builtinOptions: IRspackBuiltinProcessorOptions;
    // (undocumented)
    static defaultOptions(context: ITestContext): TCompilerOptions<ECompilerType.Rspack>;
}

// @public (undocumented)
export class RspackConfigProcessor extends MultiTaskProcessor<ECompilerType.Rspack> {
    constructor(options: IRspackConfigProcessorOptions<ECompilerType.Rspack>);
    // (undocumented)
    static defaultOptions(index: number, context: ITestContext): TCompilerOptions<ECompilerType.Rspack>;
    // (undocumented)
    static findBundle(index: number, context: ITestContext, options: TCompilerOptions<ECompilerType.Rspack>): string | string[] | undefined;
    // (undocumented)
    static overrideOptions(index: number, context: ITestContext, options: TCompilerOptions<ECompilerType.Rspack>): void;
}

// @public (undocumented)
export class RspackDiagnosticProcessor extends BasicTaskProcessor<ECompilerType.Rspack> {
    constructor(_diagnosticOptions: IRspackDiagnosticProcessorOptions);
    // (undocumented)
    check(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    static defaultOptions(context: ITestContext): TCompilerOptions<ECompilerType.Rspack>;
    // (undocumented)
    protected _diagnosticOptions: IRspackDiagnosticProcessorOptions;
}

// @public (undocumented)
export class RspackDiffConfigPlugin implements RspackPluginInstance {
    constructor(modifier?: ((options: RspackOptionsNormalized) => RspackOptionsNormalized) | undefined);
    // (undocumented)
    apply(compiler: Compiler): void;
    // (undocumented)
    name: string;
}

// @public (undocumented)
export class RspackHashProcessor extends MultiTaskProcessor<ECompilerType.Rspack> {
    constructor(options: IRspackHashProcessorOptions);
    // (undocumented)
    check(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    static defaultOptions(index: number, context: ITestContext): TCompilerOptions<ECompilerType.Rspack>;
    // (undocumented)
    static overrideOptions(index: number, context: ITestContext, options: TCompilerOptions<ECompilerType.Rspack>): void;
}

// @public (undocumented)
export class RspackHotProcessor extends BasicTaskProcessor<ECompilerType.Rspack> {
    constructor(_hotOptions: IRspackHotProcessorOptions);
    // (undocumented)
    static defaultOptions(hotOptions: IRspackHotProcessorOptions, updateOptions: TUpdateOptions): IBasicProcessorOptions<ECompilerType.Rspack>["defaultOptions"];
    // (undocumented)
    static findBundle(hotOptions: IRspackHotProcessorOptions): IBasicProcessorOptions<ECompilerType.Rspack>["findBundle"];
    // (undocumented)
    protected _hotOptions: IRspackHotProcessorOptions;
    // (undocumented)
    static overrideOptions(hotOptions: IRspackHotProcessorOptions, updateOptions: TUpdateOptions): IBasicProcessorOptions<ECompilerType.Rspack>["overrideOptions"];
    // (undocumented)
    run(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    protected runner: ITestRunner | null;
    // (undocumented)
    protected updateOptions: TUpdateOptions;
}

// @public (undocumented)
export class RspackHotStepProcessor extends RspackHotProcessor {
    constructor(_hotOptions: IRspackHotProcessorOptions);
    // (undocumented)
    check(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    protected _hotOptions: IRspackHotProcessorOptions;
    // (undocumented)
    protected matchStepSnapshot(context: ITestContext, step: number, stats: StatsCompilation, runtime?: THotStepRuntimeData): void;
    // (undocumented)
    run(env: ITestEnv, context: ITestContext): Promise<void>;
}

// @public (undocumented)
export class RspackStatsProcessor extends MultiTaskProcessor<ECompilerType.Rspack> {
    constructor(options: IRspackStatsProcessorOptions<ECompilerType.Rspack>);
    // (undocumented)
    after(context: ITestContext): Promise<void>;
    // (undocumented)
    before(context: ITestContext): Promise<void>;
    // (undocumented)
    check(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    compiler(context: ITestContext): Promise<void>;
    // (undocumented)
    static defaultOptions(index: number, context: ITestContext): TCompilerOptions<ECompilerType.Rspack>;
    // (undocumented)
    static overrideOptions(index: number, context: ITestContext, options: TCompilerOptions<ECompilerType.Rspack>): void;
}

// @public (undocumented)
export class RspackWatchProcessor extends MultiTaskProcessor<ECompilerType.Rspack> {
    constructor(_watchOptions: IRspackWatchProcessorOptions);
    // (undocumented)
    build(context: ITestContext): Promise<void>;
    // (undocumented)
    check(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    compiler(context: ITestContext): Promise<void>;
    // (undocumented)
    protected currentTriggerFilename: string | null;
    // (undocumented)
    protected lastHash: string | null;
    // (undocumented)
    static overrideOptions({ tempDir, name, experiments, optimization }: IRspackWatchProcessorOptions): (index: number, context: ITestContext, options: TCompilerOptions<ECompilerType.Rspack>) => void;
    // (undocumented)
    run(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    protected _watchOptions: IRspackWatchProcessorOptions;
}

// @public (undocumented)
export class RspackWatchStepProcessor extends RspackWatchProcessor {
    constructor(_watchOptions: IRspackWatchStepProcessorOptions);
    // (undocumented)
    build(context: ITestContext): Promise<void>;
    // (undocumented)
    compiler(context: ITestContext): Promise<void>;
    // (undocumented)
    protected _watchOptions: IRspackWatchStepProcessorOptions;
}

// @public (undocumented)
export class SimpleTaskProcessor<T extends ECompilerType = ECompilerType.Rspack> implements ITestProcessor {
    constructor(_options: ISimpleProcessorOptions<T>);
    // (undocumented)
    after(context: ITestContext): Promise<void>;
    // (undocumented)
    afterAll(context: ITestContext): Promise<void>;
    // (undocumented)
    before(context: ITestContext): Promise<void>;
    // (undocumented)
    beforeAll(context: ITestContext): Promise<void>;
    // (undocumented)
    build(context: ITestContext): Promise<void>;
    // (undocumented)
    check(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    compiler(context: ITestContext): Promise<void>;
    // (undocumented)
    config(context: ITestContext): Promise<void>;
    // (undocumented)
    protected getCompiler(context: ITestContext): ITestCompilerManager_2<T>;
    // (undocumented)
    protected _options: ISimpleProcessorOptions<T>;
    // (undocumented)
    run(env: ITestEnv, context: ITestContext): Promise<void>;
}

// @public (undocumented)
export class SnapshotProcessor<T extends ECompilerType> extends BasicTaskProcessor<T> {
    constructor(_snapshotOptions: ISnapshotProcessorOptions<T>);
    // (undocumented)
    check(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    protected _snapshotOptions: ISnapshotProcessorOptions<T>;
}

// @public (undocumented)
export class StatsAPITaskProcessor<T extends ECompilerType> extends SimpleTaskProcessor<T> {
    constructor(_statsAPIOptions: IStatsAPITaskProcessorOptions<T>);
    // (undocumented)
    static addSnapshotSerializer(): void;
    // (undocumented)
    check(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    compiler(context: ITestContext): Promise<void>;
    // (undocumented)
    run(env: ITestEnv, context: ITestContext): Promise<void>;
    // (undocumented)
    protected _statsAPIOptions: IStatsAPITaskProcessorOptions<T>;
}

// @public (undocumented)
export type TBasicRunnerFile = {
    path: string;
    content: string;
    subPath: string;
};

// @public (undocumented)
export type TCaseSummary = Record<TCaseSummaryId, number>;

// @public (undocumented)
export type TCaseSummaryId = `${TCompilerTypeId}|${TModuleTypeId}|${TDimenTypeId}`;

// @public (undocumented)
export type TCompareModules = string[] | true;

// @public (undocumented)
export type TCompareResult = {
    type: ECompareResultType;
    detail?: unknown;
    source?: string;
    dist?: string;
    lines?: {
        common: number;
        source: number;
        dist: number;
    };
};

// @public (undocumented)
export type TCompiler<T> = T extends ECompilerType.Rspack ? Compiler : Compiler_2;

// @public (undocumented)
export type TCompilerCaseConfig = Omit<ISimpleProcessorOptions, "name" | "compilerType"> & {
    description: string;
};

// @public (undocumented)
export type TCompilerFactory<T extends ECompilerType> = (options: TCompilerOptions<T> | TCompilerOptions<T>[]) => TCompiler<T>;

// @public (undocumented)
export type TCompilerOptions<T> = T extends ECompilerType.Rspack ? RspackOptions : Configuration;

// @public (undocumented)
export type TCompilerStats<T> = T extends ECompilerType.Rspack ? Stats : Stats_2;

// @public (undocumented)
export type TCompilerStatsCompilation<T> = T extends ECompilerType.Rspack ? StatsCompilation : StatsCompilation_2;

// @public (undocumented)
export type TCompilerTypeId = ECompilerType.Rspack | ECompilerType.Webpack | "common";

// @public (undocumented)
export type TDiffStats = {
    root: string;
    data: Array<TDiffStatsItem>;
};

// @public (undocumented)
export type TDiffStatsItem = {
    name: string;
    source: string;
    dist: string;
    type: ECompareResultType;
};

// @public (undocumented)
export type TDimenTypeId = "modules" | "lines" | "lines-in-common";

// @public (undocumented)
export type TErrorCaseConfig = Omit<IErrorTaskProcessorOptions<ECompilerType.Rspack>, "name" | "compilerType"> & {
    description: string;
};

// @public (undocumented)
export class TestContext implements ITestContext {
    constructor(config: TTestContextOptions);
    // (undocumented)
    clearError(name?: string): void;
    // (undocumented)
    protected compilers: Map<string, ITestCompilerManager<ECompilerType>>;
    // (undocumented)
    emitError(name: string, err: Error | string): void;
    // (undocumented)
    protected errors: Map<string, Error[]>;
    // (undocumented)
    getCompiler<T extends ECompilerType>(name: string, type: T | void): ITestCompilerManager<T>;
    // (undocumented)
    getDist(sub?: string): string;
    // (undocumented)
    getError(name?: string): Error[];
    // (undocumented)
    getNames(): string[];
    // (undocumented)
    getRunner(key: string): ITestRunner | null;
    // (undocumented)
    getRunnerFactory<T extends ECompilerType>(name: string): TRunnerFactory<T> | null;
    // (undocumented)
    getSource(sub?: string): string;
    // (undocumented)
    getTemp(sub?: string): string | null;
    // (undocumented)
    getTestConfig<T extends ECompilerType>(): TTestConfig<T>;
    // (undocumented)
    getValue<T>(name: string, key: string): T | void;
    // (undocumented)
    hasError(name?: string): boolean;
    // (undocumented)
    protected runnerFactory: TRunnerFactory<ECompilerType> | null;
    // (undocumented)
    protected runners: Map<string, ITestRunner>;
    // (undocumented)
    setRunner(key: string, runner: ITestRunner): void;
    // (undocumented)
    setValue<T>(name: string, key: string, value: T): void;
    // (undocumented)
    protected store: Map<string, Record<string, unknown>>;
}

// @public (undocumented)
export class Tester implements ITester {
    constructor(config: ITesterConfig);
    // (undocumented)
    check(env: ITestEnv): Promise<void>;
    // (undocumented)
    compile(): Promise<void>;
    // (undocumented)
    next(): boolean;
    // (undocumented)
    prepare(): Promise<void>;
    // (undocumented)
    resume(): Promise<void>;
    // (undocumented)
    step: number;
    // (undocumented)
    total: number;
}

// @public (undocumented)
export type TFileCompareResult = TCompareResult & {
    file: {
        source: string;
        dist: string;
    };
    modules: Partial<Record<"modules" | "runtimeModules", TModuleCompareResult[]>>;
};

// @public (undocumented)
export type THookCaseConfig = Omit<IHookProcessorOptions<ECompilerType.Rspack>, "name" | "compilerType" | "runable"> & {
    description: string;
};

// @public (undocumented)
export type THotStepRuntimeData = {
    javascript: THotStepRuntimeLangData;
    css: THotStepRuntimeLangData;
    statusPath: string[];
};

// @public (undocumented)
export type THotStepRuntimeLangData = {
    outdatedModules: string[];
    outdatedDependencies: Record<string, string[]>;
    updatedModules: string[];
    updatedRuntime: string[];
    acceptedModules: string[];
    disposedModules: string[];
};

// @public (undocumented)
export type TModuleCompareResult = TCompareResult & {
    name: string;
};

// @public (undocumented)
export type TModuleObject = {
    exports: unknown;
};

// @public (undocumented)
export type TModuleTypeId = "normal" | "runtime";

// @public (undocumented)
type TRspackExperiments = TCompilerOptions<ECompilerType.Rspack>["experiments"];

// @public (undocumented)
type TRspackOptimization = TCompilerOptions<ECompilerType.Rspack>["optimization"];

// @public (undocumented)
export interface TRunnerFactory<T extends ECompilerType> {
    // (undocumented)
    create(file: string, compilerOptions: TCompilerOptions<T>, env: ITestEnv): ITestRunner;
}

// @public (undocumented)
export type TRunnerRequirer = (currentDirectory: string, modulePath: string[] | string, context?: {
    file?: TBasicRunnerFile;
    esmMode?: EEsmMode;
}) => Object | Promise<Object>;

// @public (undocumented)
export type TStatsAPICaseConfig = Omit<IStatsAPITaskProcessorOptions<ECompilerType.Rspack>, "name" | "compilerType"> & {
    description: string;
};

// @public (undocumented)
type TStatsDiagnostics = {
    errors: StatsError[];
    warnings: StatsWarnings[];
};

// @public (undocumented)
export type TTestConfig<T extends ECompilerType> = {
    validate?: (stats: TCompilerStats<T>, stderr?: string) => void;
    noTest?: boolean;
    beforeExecute?: () => void;
    afterExecute?: () => void;
    moduleScope?: (ms: IBasicModuleScope) => IBasicModuleScope;
    findBundle?: (index: number, options: TCompilerOptions<T>) => string | string[];
    bundlePath?: string[];
    nonEsmThis?: (p: string | string[]) => Object;
    modules?: Record<string, Object>;
    timeout?: number;
};

// @public (undocumented)
export type TTestContextOptions = Omit<ITesterConfig, "name" | "steps">;

// @public (undocumented)
export type TTestFilter<T extends ECompilerType> = (creatorConfig: Record<string, unknown>, testConfig: TTestConfig<T>) => boolean | string;

// @public (undocumented)
export type TTestRunResult = Record<string, any>;

// @public (undocumented)
export type TUpdateOptions = {
    updateIndex: number;
};

// @public (undocumented)
export class WatchRunnerFactory<T extends ECompilerType> extends BasicRunnerFactory<T> {
    // (undocumented)
    protected createRunner(file: string, stats: TCompilerStatsCompilation<T>, compilerOptions: TCompilerOptions<T>, env: ITestEnv): ITestRunner;
    // (undocumented)
    protected getRunnerKey(file: string): string;
}

// @public (undocumented)
export class WebpackDiffConfigPlugin {
    constructor(modifier?: ((options: WebpackOptionsNormalized) => WebpackOptionsNormalized) | undefined);
    // (undocumented)
    apply(compiler: Compiler_2): void;
    // (undocumented)
    name: string;
}

// @public (undocumented)
export class WebpackModulePlaceholderPlugin {
    constructor();
    // (undocumented)
    apply(compiler: any): void;
}

// (No @packageDocumentation comment for this package)

```
